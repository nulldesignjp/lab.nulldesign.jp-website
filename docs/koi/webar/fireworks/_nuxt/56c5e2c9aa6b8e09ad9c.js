(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{182:function(t,e,o){var content=o(200);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(63).default)("31b988b4",content,!0,{sourceMap:!1})},183:function(t,e,o){var content=o(202);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(63).default)("6759f5ab",content,!0,{sourceMap:!1})},199:function(t,e,o){"use strict";var n=o(182);o.n(n).a},200:function(t,e,o){(e=o(62)(!1)).push([t.i,".artwork{z-index:-1}.artwork,.artwork__canvas,.artwork__video{position:fixed;left:0;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.artwork__canvas,.artwork__video{display:block;z-index:-2}.artwork__video{-o-object-fit:fill;object-fit:fill}.artwork__button{position:fixed;left:50%;top:50%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2;font-size:1.2em;width:320px;height:128px;margin:-64px 0 0 -160px;border:1px solid hsla(0,0%,100%,.6);border-radius:8px;background:hsla(0,0%,100%,.6);box-shadow:0 0 16px rgba(0,0,0,.1)}.artwork__button.hide,.hide{display:none}",""]),t.exports=e},201:function(t,e,o){"use strict";var n=o(183);o.n(n).a},202:function(t,e,o){(e=o(62)(!1)).push([t.i,"body,html{overflow:hidden;font-family:Heebo}body{background:#000}.title{margin:16px 16px 0;padding:4px 4px 0}.description,.title{line-height:1;font-weight:400;background:hsla(0,0%,100%,.2);font-weight:100;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.description{margin:0 16px;padding:0 4px 4px;font-size:1em}.message{position:fixed;bottom:8px;left:0;width:100%;margin:0;padding:4px 4px 0;line-height:1;font-weight:400;background:hsla(0,0%,100%,.4);font-weight:100;display:none;text-align:center}.message.show{display:block}",""]),t.exports=e},206:function(t,e,o){"use strict";o.r(e);var n=o(178),r=o(179),l=o(177),c=(o(20),o(21),o(13),o(191),o(203),o(204),o(205),o(184),o(185),o(193),o(181),o(194),o(186),o(195)),h=o(196);var d,m=function(){function t(e,o,r){Object(n.a)(this,t);var l=this;this.scene,this.camera,this.focus,this.renderer,this.mode,this.clock,this.time,this.timeScale,this.animationKey,this.controls,this.raycaster,this.composer,o=null==o?16777215:o,this.mode=null==r?0:r,this.init(e,o,this.mode),window.addEventListener("resize",(function(){l.resize()})),this.resize()}return Object(r.a)(t,[{key:"init",value:function(t,e,o){this.clock=new l.j,this.time=0;var n=window.innerWidth,r=window.innerHeight;this.scene=new l.db,this.camera=new l.R(60,n/r,.01,1e3),this.camera.position.set(0,0,500),this.focus=new l.pb(0,0,0),this.renderer=new l.tb({antialias:!0,canvas:t,alpha:!0}),this.renderer.setSize(n,r),this.renderer.setClearColor(e),this.renderer.autoClearColor=!1,this.renderer.autoClear=!1,this.renderer.render(this.scene,this.camera),this.raycaster=new l.bb}},{key:"render",value:function(){var t=this;this.animationKey=window.requestAnimationFrame((function(){t.render()}));var e=this.clock.getDelta();this.time+=e*this.timeScale,null!=this.controls&&(0==this.controls.alphaOffset&&0!=this.camera.rotation.y&&(this.controls.alphaOffset=-1*this.camera.rotation.y),this.controls.update()),this.renderer.render(this.scene,this.camera)}},{key:"resize",value:function(){console.log("resize....");var t=window.innerWidth,e=window.innerHeight;this.renderer.setSize(t,e),this.camera.aspect?this.camera.aspect=t/e:(this.camera.left=.5*-t,this.camera.right=.5*t,this.camera.bottom=.5*-e,this.camera.top=.5*e),this.camera.updateProjectionMatrix()}},{key:"getWorldToScreen2D",value:function(t){var e=new l.pb,o=this.renderer.getContext(),n=.5*o.canvas.width,r=.5*o.canvas.height;t.updateMatrixWorld(),e.setFromMatrixPosition(t.matrixWorld),e.project(this.camera),e.x=e.x*n+n,e.y=-e.y*r+r;var c=(new l.pb).subVectors(this.focus,this.camera.position),h=(new l.pb).subVectors(t.position,this.camera.position);return c.dot(h)<=0&&(e.x=-9999,e.y=-9999),{x:e.x,y:e.y}}},{key:"focalLengthToFOV",value:function(t){var e=this.camera.filmGauge,o=2*e/3,n=Math.sqrt(e*e+o*o);this.camera.fov=180/Math.PI*Math.atan(n/(2*t))*2,this.camera.updateProjectionMatrix()}},{key:"pixelEqualMagnification",value:function(){return.5*window.innerHeight/Math.tan(.5*_world.camera.fov*Math.PI/180)}},{key:"add",value:function(t){this.scene.add(t)}},{key:"remove",value:function(t){if(t.geometry.dispose(),null!=t.material.uniforms)for(var i in null!=t.material.uniforms.value.dispose)t.material.uniforms[i].value.dispose();null!=t.material.map&&t.material.map.dispose(),this.scene.remove(t)}},{key:"renderStart",value:function(){this.renderStop(),this.clock.start(),this.render(0)}},{key:"renderStop",value:function(){window.cancelAnimationFrame(this.animationKey),this.clock.stop()}},{key:"addOrbitControls",value:function(){this.controls=new h.a(this.camera,this.renderer.domElement),this.controls.autoRotate=!1,this.controls.autoRotateSpeed=.2,this.controls.enableDamping=!0,this.controls.dampingFactor=.15,this.controls.enableZoom=!0,this.controls.enabled=!0,this.controls.target=this.focus}},{key:"addDeviceOrientationControls",value:function(){this.controls=new c.a(this.camera),this.controls.connect()}},{key:"addDevicemotion",value:function(t){}},{key:"dispose",value:function(){this.renderStop(),this.scene.dispose(),this.renderer.dispose(),this.controls.dispose(),this.scene=null,this.renderer=null,this.controls=null,this.camera=null,this.focus=null,this.clock=null,this.time=null,this.timeScale=null,this.animationKey=null,this.raycaster=null,this.composer=null}}]),t}(),f=(o(197),o(187)),v=(o(189),function(){function t(e){Object(n.a)(this,t),d=this,this.param=e,this.mesh,this.init()}return Object(r.a)(t,[{key:"init",value:function(){for(var t=this.param,e=t.partCount,o=new l.g,n=[],r=[],c=[],h=[],m=[],f=new l.pb,v=(new l.k).setHSL(0,.5,.55),i=0;i<e;i++){var w=Math.acos(2*i/e-1),y=Math.sqrt(e*Math.PI)*w;if(w+=.1*(Math.random()-.5),y+=.1*(Math.random()-.5),f.setFromSphericalCoords(50,w,y),0==this.param.shape){var k=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,x=3*i/e*Math.PI*2,M=Math.sin(k)*Math.cos(x)*50,_=Math.sin(k)*Math.sin(x)*50,D=50*Math.cos(k);f.x=M,f.y=_,f.z=D}n[3*i+0]=f.x,n[3*i+1]=f.y,n[3*i+2]=f.z,r[i]=4*t.partSize,c[i]=Math.random()<.05?200:0,c[i]*=t.partSizeVariance,h[3*i+0]=v.r,h[3*i+1]=v.g,h[3*i+2]=v.b,m[i]=Math.random()*t.flickerDensity}o.setAttribute("position",new l.t(n,3)),o.setAttribute("colors",new l.t(h,3)),o.setAttribute("size",new l.t(r,1).setUsage(l.o)),o.setAttribute("sizeVariances",new l.t(c,1).setUsage(l.o)),o.setAttribute("flickerDensity",new l.t(m,1).setUsage(l.o)),o.rotateX(Math.random()*Math.PI*2),o.rotateY(Math.random()*Math.PI*2),o.rotateZ(Math.random()*Math.PI*2),o.computeVertexNormals(),o.computeBoundingBox(),o.computeBoundingSphere();var P=new l.eb({uniforms:{time:{value:0},texture0:{value:d.param.textures[2]},texture1:{value:d.param.textures[3]},color01:{value:t.partColors[0]},color02:{value:t.partColors[1]},color03:{value:t.partColors[2]},lifeTime:{value:t.lifeTime},masterFlickerDensity:{value:t.flickerDensity},releaseDuration:{value:t.releaseDuration},totalSize:{value:t.totalSize}},vertexShader:["uniform float time;","uniform float lifeTime;","uniform float masterFlickerDensity;","uniform float totalSize;","attribute float size;","attribute float sizeVariances;","attribute float flickerDensity;","attribute vec3 colors;","varying float vFlickerDensity;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","float easeOutCubic(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t + 1.0) + b;","}","float easeOutQuint(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t*t*t + 1.0) + b;","}","float easeOutExpo(float t,float b,float c,float d)","{","\treturn (t==d) ? b+c : c * 1.001 * (-pow(2.0, -10.0 * t/d) + 1.0) + b;","}","void main() {","\tvec3 pos = normalize( position );","\tfloat _time = time > lifeTime + masterFlickerDensity? lifeTime + masterFlickerDensity : time;","\tfloat fireScale = easeOutCubic( _time, 0.0, 1.0, lifeTime + masterFlickerDensity ) * totalSize;","\tvec3 _newPos = pos * fireScale * 50.0;","\t_newPos.y -= time * time * 2.5;","\tpos = _newPos;","\tvFlickerDensity = flickerDensity;","\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","\tgl_PointSize = ( size + sizeVariances * time / lifeTime ) * (100.0 / length(mvPosition.xyz));","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform float lifeTime;","uniform float releaseDuration;","uniform sampler2D texture0;","uniform sampler2D texture1;","uniform vec3 color01;","uniform vec3 color02;","uniform vec3 color03;","varying float vFlickerDensity;","float easeOutQuad(float t,float b,float c,float d)","{","\t return -c *(t/=d)*(t-2.0) + b;","}","void main( void ) {","\tvec4 tex0 = texture2D( texture0, gl_PointCoord );","\tvec4 tex1 = texture2D( texture1, gl_PointCoord );","\tfloat _par = easeOutQuad( time, 0.0, 1.0, lifeTime );","\tvec4 tex = mix( tex0, tex1, min( _par, 1.0 ) );","\tfloat _offset = 1.0 - ( time - ( lifeTime + vFlickerDensity ) ) / releaseDuration;","\tfloat _opacity = time / ( lifeTime + vFlickerDensity ) < 1.0? 1.0: _offset;","\tfloat _check = time / ( lifeTime + vFlickerDensity );","\tvec3 myColor = color01;","\tmyColor = mix(color01, color02, smoothstep(0.0, 0.5, _check));","\tmyColor = mix(color02, color03, smoothstep(0.5, 1.0, _check));","\tgl_FragColor = tex * vec4( myColor, max( _opacity, 0.0 ) );","}"].join("\n"),blending:l.a,depthTest:!1,transparent:!0,vertexColors:!0});this.mesh=new l.V(o,P)}},{key:"update",value:function(t){this.mesh.material.uniforms.time.value+=t}},{key:"dispose",value:function(){this.param=null}}]),t}()),w=function(){function t(e){Object(n.a)(this,t),d=this,this.param=e,this.mesh,this.init()}return Object(r.a)(t,[{key:"init",value:function(){for(var t=this.param,e=t.partCount,o=new l.g,n=[],r=[],c=[],h=[],d=new l.pb,m=(new l.k).setHSL(0,.5,.55),i=0;i<e;i++){var f=Math.acos(2*i/e-1),v=Math.sqrt(e*Math.PI)*f;if(f+=.1*(Math.random()-.5),v+=.1*(Math.random()-.5),d.setFromSphericalCoords(50,f,v),0==this.param.shape){var w=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,y=3*i/e*Math.PI*2,k=Math.sin(w)*Math.cos(y)*50,x=Math.sin(w)*Math.sin(y)*50,M=50*Math.cos(w);d.x=k,d.y=x,d.z=M}if(1==this.param.shape){w=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,y=Math.random()*Math.PI/3+Math.PI*(i%2),k=Math.sin(w)*Math.cos(y)*50,x=Math.sin(w)*Math.sin(y)*50,M=50*Math.cos(w);d.x=k,d.y=x,d.z=M}if(2==this.param.shape){w=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,y=Math.random()*Math.PI/6+Math.PI/3*(i%6),k=Math.sin(w)*Math.cos(y)*50,x=Math.sin(w)*Math.sin(y)*50,M=50*Math.cos(w);d.x=k,d.y=x,d.z=M}for(var _=t.partLength,D=0;D<_;D++)n[3*(i*_+D)+0]=d.x,n[3*(i*_+D)+1]=d.y,n[3*(i*_+D)+2]=d.z,r[3*(i*_+D)+0]=m.r,r[3*(i*_+D)+1]=m.g,r[3*(i*_+D)+2]=m.b,c[i*_+D]=Math.random()*t.flickerDensity,h[i*_+D]=Math.round(D/2)}o.setAttribute("position",new l.t(n,3)),o.setAttribute("colors",new l.t(r,3)),o.setAttribute("flickerDensity",new l.t(c,1).setUsage(l.o)),o.setAttribute("drawNumber",new l.t(h,1).setUsage(l.o)),o.rotateX(Math.random()*Math.PI*2),o.rotateY(Math.random()*Math.PI*2),o.rotateZ(Math.random()*Math.PI*2),o.computeVertexNormals(),o.computeBoundingBox(),o.computeBoundingSphere();var P=[];for(i=0;i<t.partLength;i++)P[i]=0;var C=new l.eb({defines:{partLength:parseFloat(t.partLength)},uniforms:{time:{value:0},times:{value:P},color01:{value:t.partColors[0]},color02:{value:t.partColors[1]},color03:{value:t.partColors[2]},lifeTime:{value:t.lifeTime},masterFlickerDensity:{value:t.flickerDensity},releaseDuration:{value:t.releaseDuration},totalSize:{value:t.totalSize}},vertexShader:["uniform float time;","uniform float times["+t.partLength+"];","uniform float lifeTime;","uniform float masterFlickerDensity;","uniform float totalSize;","attribute vec3 colors;","attribute float flickerDensity;","attribute float drawNumber;","varying float vFlickerDensity;","varying float vDrawNumber;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","float easeOutCubic(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t + 1.0) + b;","}","float easeOutQuint(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t*t*t + 1.0) + b;","}","float easeOutExpo(float t,float b,float c,float d)","{","\treturn (t==d) ? b+c : c * 1.001 * (-pow(2.0, -10.0 * t/d) + 1.0) + b;","}","void main() {","\tvec3 pos = normalize( position );","\tint index = int(drawNumber);","\tfloat _timeValue = times[index];","\tfloat _time = _timeValue > lifeTime + masterFlickerDensity? lifeTime + masterFlickerDensity : _timeValue;","\tfloat fireScale = easeOutCubic( _time, 0.0, 1.0, lifeTime + masterFlickerDensity ) * totalSize;","\tvec3 _newPos = pos * fireScale * 50.0;","\t_newPos.y -= _timeValue * _timeValue * 2.5;","\tpos = _newPos;","\tvFlickerDensity = flickerDensity;","\tvDrawNumber = drawNumber;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform float lifeTime;","uniform float releaseDuration;","uniform vec3 color01;","uniform vec3 color02;","uniform vec3 color03;","varying float vFlickerDensity;","varying float vDrawNumber;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","void main( void ) {","\tfloat _offset = 1.0 - ( time - ( lifeTime + vFlickerDensity ) ) / releaseDuration;","\tfloat _opacity = time / ( lifeTime + vFlickerDensity ) < 1.0? 1.0: _offset;","\t_opacity = _opacity * ( 1.0 - vDrawNumber / float(partLength) );","\t_opacity = _opacity * _opacity * _opacity;","\tfloat _check = time / ( lifeTime + vFlickerDensity );","\tvec3 myColor = color01;","\tmyColor = mix(color01, color02, smoothstep(0.0, 0.5, _check));","\tmyColor = mix(color02, color03, smoothstep(0.5, 1.0, _check));","\tgl_FragColor = vec4( myColor, max( _opacity, 0.0 ) );","}"].join("\n"),blending:l.a,depthTest:!1,transparent:!0,vertexColors:!0});this.mesh=new l.A(o,C)}},{key:"update",value:function(t){this.mesh.material.uniforms.time.value+=t;for(var e=this.mesh.material.uniforms.times.value,o=e.length;o;)0==--o?e[0]+=t:e[o]=e[o-1]}},{key:"dispose",value:function(){this.param=null}}]),t}(),y=function(){function t(e){Object(n.a)(this,t),this.props=e,this.scene,this.clock,this.time,this.loopKey,this.textures,this.objectList,this.init()}return Object(r.a)(t,[{key:"init",value:function(){this.scene=new l.db,this.clock=new l.j,this.textures=[],this.textures[0]=(new l.lb).load("assets/img/spark1.png"),this.textures[1]=(new l.lb).load("assets/img/circle1.png"),this.textures[2]=(new l.lb).load("assets/img/particle01.png"),this.textures[3]=(new l.lb).load("assets/img/particle02.png"),this.textures[4]=(new l.lb).load("assets/img/particle03.png"),this.objectList=[];var t=this;setInterval((function(){var e=t.generateParams();t._fire(e)}),1e3),this.update()}},{key:"update",value:function(){var t=this;this.loopKey=window.requestAnimationFrame((function(){t.update()}));var e=this.clock.getDelta();this.time+=e;for(var o=this.objectList.length;o;)for(var n in o--,this.objectList[o].instances){this.objectList[o].instances[n].update(e);var r=this.objectList[o].instances[n].mesh,l=this.objectList[o].instances[n].param.deadTime;if(r.material.uniforms.time.value>l){var c=this.objectList.splice(o,1);for(var h in c[0].instances){var d=c[0].instances[h];this.scene.remove(d.mesh),d.mesh.geometry.dispose(),d.mesh.material.map&&d.mesh.material.map.dispose(),d.mesh.material.dispose(),d.dispose()}c=null;break}}}},{key:"fire",value:function(t,e,o,n,r){var c=this.generateParams();this._fire(c,new l.pb(o,n,r))}},{key:"_fire",value:function(t,e){null==e&&(e=new l.pb);for(var o=[],n=-1e3,i=0;i<t.length;i++){var r;r="BOTAN"==t[i].type?new v(t[i]):new w(t[i]),this.scene.add(r.mesh),r.mesh.position.set(t[i].position.x+10*e.x,t[i].position.y+10*e.y,t[i].position.z+10*e.z),o[i]=r,n=t[i].deadTime>n?t[i].deadTime:n}for(var c=["LayerE","LayerD","LayerC","LayerB","LayerA"],h={},d=t.length;d;)h[c[--d]]=o[d];var m={name:"name",date:(new Date).getTime(),instances:h,deadTime:n,fworks:{}};this.objectList.push(m)}},{key:"generateParams",value:function(){var t=new l.pb,e=200*(1-Math.random()*Math.random()),o=Math.random()*Math.PI*2;t.x=Math.cos(o)*e,t.y=80*Math.random()+20,t.z=Math.sin(o)*e;for(var n=Math.floor(3*Math.random())+2,r=[],i=0;i<n;i++){var c=360*Math.random(),h=Math.random()*c,d=[{h:0,s:.85,l:.5},{h:120,s:.85,l:.5},{h:240,s:.85,l:.5},{h:60,s:.85,l:.5},{h:300,s:.85,l:.5},{h:0,s:0,l:.9},{h:60,s:.2,l:1}],m=(Math.random(),Math.random(),Math.random(),{type:Math.random()<.75?"BOTAN":"KIKU",shape:Math.floor(5*Math.random()),lifeTime:1.2,partCount:.6*(100*n-100*i),partSize:.75*(10+~~(10*Math.random())),partSizeVariance:1,flickerDensity:.5,partLength:24,partColors:[(new l.k).setHSL(Math.random(),.85,.75),(new l.k).setHSL(Math.random(),.85,.75),(new l.k).setHSL(Math.random(),.85,.75)],releaseDuration:.3,fworkSpeed:1,fworkAccel:10,fworkGravity:1,fworkHueMin:h,fworkHueMax:c,totalSize:(1+.1*Math.floor(10*Math.random()))*((i+1)/n+.1*(Math.random()-.5)),deadTime:1,position:t,textures:this.textures});m.deadTime=m.lifeTime+m.flickerDensity+m.releaseDuration,r[i]=m}return r}},{key:"resize",value:function(){}},{key:"start",value:function(){this.stop(),this.update(),this.clock.start()}},{key:"stop",value:function(){window.cancelAnimationFrame(this.loopKey),this.clock.stop()}},{key:"addEvents",value:function(){}},{key:"removeEvents",value:function(){}},{key:"dispose",value:function(){this.removeEvents(),this.stop()}}]),t}(),k=(o(22),o(198),function(){function t(e){Object(n.a)(this,t),this.props=e,this.world,this.scene,this.video,this.surface,this.raycaster,this.tapPosition,this.loopKey,this.isSP=!1;var o=navigator.userAgent.toLowerCase();-1==o.indexOf("iphone")&&-1==o.indexOf("ipad")&&-1==o.indexOf("android")||(this.isSP=!0),this.init(),this.loop();var r=this;if(this.isSP)this.addVideo(),this.props.$button.addEventListener("mousedown",(function(t){r.addDeviceOrientationControls(t)}));else{this.world.addOrbitControls(),this.props.$button.setAttribute("style","display:none;");var c="https://api.qrserver.com/v1/create-qr-code/?size=256x256&data="+location.href;(new l.lb).load(c,(function(t){var e=new l.b(16777215,.3),o=new l.m(16777215,.9);o.position.set(1,2,3),r.world.add(e),r.world.add(o);var n=new l.T(16,16,1,1),c=new l.K({map:t,side:l.n}),h=new l.J(n,c);h.scale.set(.1,.1,.1),r.world.add(h);n=new l.e(20,20,5,1,1,1),c=new l.L({color:16777215});var d=new l.J(n,c);d.scale.set(.1,.1,.1),r.world.add(d),d.position.z=-.3,r.world.camera.position.y=0,r.world.scene.fog=new l.u(0,.2),(new f.a).load("assets/fbx/info.fbx",(function(object){object.scale.set(.00225,.00225,.00225),object.rotation.x=.5*Math.PI,object.position.y=-1.35,object.traverse((function(t){t.isMesh&&(t.castShadow=!0,t.receiveShadow=!0)})),r.world.add(object)})),function t(){window.requestAnimationFrame(t);var e=.001*(new Date).getTime(),o=1.8*Math.cos(.25*e),n=1.5*Math.sin(.089*e);r.world.camera.position.x=o,r.world.camera.position.y=n}()}),void 0,(function(t){console.log(t)}))}r=this;window.addEventListener("resize",(function(){r.resize()}))}return Object(r.a)(t,[{key:"init",value:function(){this.world=new m(this.props.$canvas,this.props.$bgColor,!0),this.world.renderStart();var t=new l.T(1e3,1e3,1,1);t.rotateX(.5*-Math.PI);var e=new l.K({transparent:!0,opacity:0,wireframe:!0});this.surface=new l.J(t,e),this.world.add(this.surface),this.raycaster=new l.bb,this.tapPosition=new l.ob,this.world.focalLengthToFOV(28),this.world.camera.position.y=1.6,this.world.camera.position.z=3,this.world.focus=new l.pb(0,0,0)}},{key:"setUp",value:function(){var t=new y;this.scene=t,this.world.scene.add(this.scene.scene);var e=this;this.props.$canvas.addEventListener("touchstart",(function(o){var n=new l.ob;if(n.x=o.touches[0].pageX,n.y=o.touches[0].pageY,o.touches.length,!(o.touches.length>2)){e.tapPosition.x=o.touches[0].clientX/window.innerWidth*2-1,e.tapPosition.y=-o.touches[0].clientY/window.innerHeight*2+1,e.raycaster.setFromCamera(e.tapPosition,e.world.camera);var r=e.raycaster.intersectObject(e.surface);1==r.length&&r[0].object==e.surface?t.fire(n,e.video,r[0].point.x,r[0].point.y,r[0].point.z):t.fire(n,e.video,0,0,0)}})),this.props.$canvas.addEventListener("touchmove",(function(o){var n=new l.ob;if(n.x=o.touches[0].pageX,n.y=o.touches[0].pageY,o.touches.length,!(o.touches.length>2)){e.tapPosition.x=o.touches[0].clientX/window.innerWidth*2-1,e.tapPosition.y=-o.touches[0].clientY/window.innerHeight*2+1,e.raycaster.setFromCamera(e.tapPosition,e.world.camera);var r=e.raycaster.intersectObject(e.surface);1==r.length&&r[0].object==e.surface?t.fire(n,e.video,r[0].point.x,r[0].point.y,r[0].point.z):t.fire(n,e.video,0,0,0)}}))}},{key:"addVideo",value:function(){var t=window.innerWidth,e=window.innerHeight;this.video=this.props.$video,this.video.style.width=window.innerWidth+"px",this.video.style.height=window.innerHeight+"px",this.video.width=window.innerWidth,this.video.height=window.innerHeight,this.video.autoplay=!0;var o=this,n=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:{exact:"environment"},aspectRatio:e/t}});n.then((function(t){o.video.srcObject=t})),n.catch((function(t){alert("Camera And Video Settimg Error.\n設定をしてもらってリロードを促す。")}))}},{key:"addDeviceOrientationControls",value:function(t){this.props.$button.removeEventListener("mousedown",this.addDeviceOrientationControls),this.world.addDeviceOrientationControls(),this.props.$button.setAttribute("style","display:none;"),document.querySelector(".message").className="message show",this.setUp()}},{key:"placeObjectTouchHandler",value:function(t){if(t.touches.length,!(t.touches.length>2)){this.tapPosition.x=t.touches[0].clientX/window.innerWidth*2-1,this.tapPosition.y=-t.touches[0].clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.tapPosition,this.world.camera);var e=this.raycaster.intersectObject(this.surface);1==e.length&&e[0].object==this.surface&&this.placeObject(e[0].point.x,e[0].point.y,e[0].point.z)}}},{key:"placeObject",value:function(t,e,o){var n=new l.x(1,1),r=new l.K({wireframe:!0,transparent:!0,color:new l.k(Math.random(),Math.random(),Math.random())}),c=new l.J(n,r);c.position.set(t,e,o),c.rotation.x=Math.random()*Math.PI*2,c.rotation.y=Math.random()*Math.PI*2,this.world.add(c),c.scale.set(.01,.01,.01)}},{key:"loop",value:function(){var t=this;this.loopKey=window.requestAnimationFrame((function(){t.loop()}))}},{key:"resize",value:function(t){this.props.$video.style.width=window.innerWidth+"px",this.props.$video.style.height=window.innerHeight+"px"}},{key:"addEvents",value:function(){}},{key:"removeEvents",value:function(){}},{key:"dispose",value:function(){this.loopKey=window.cancelAnimationFrame(this.loopKey),this.removeEvents(),this.world.remove(this.surface),this.surface=null,this.world.dispose(),this.world=null,this.props=null,this.video=null,this.raycaster=null,this.tapPosition=null}}]),t}()),x={name:"artwork",components:{},props:[],data:function(){return{}},computed:{},mounted:function(){this.artworkGL=new k({$canvas:this.$refs.canvas,$bgColor:526344,$video:this.$refs.video,$button:this.$refs.button})},destroyed:function(){},methods:{}},M=(o(199),o(30)),_={components:{Artwork:Object(M.a)(x,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"artwork"},[e("video",{ref:"video",staticClass:"artwork__video",attrs:{autoplay:"",playsinline:"true"}}),this._v(" "),e("canvas",{ref:"canvas",staticClass:"artwork__canvas"}),this._v(" "),e("button",{ref:"button",staticClass:"artwork__button"},[this._v("WebARモードをONにする")])])}),[],!1,null,null,null).exports}},D=(o(201),Object(M.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",[e("Artwork"),this._v(" "),e("h1",{staticClass:"title"},[this._v("WebAR")]),this._v(" "),e("h2",{staticClass:"description"},[this._v("original webar libs. sp only.")]),this._v(" "),this._m(0)],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"message"},[this._v("画面をタップ、フリックして"),e("br"),this._v("打ち上げ花火を楽しもう！")])}],!1,null,null,null));e.default=D.exports}}]);