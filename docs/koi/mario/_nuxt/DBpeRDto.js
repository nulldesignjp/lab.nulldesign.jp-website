import{r as g,o as x,t as C,v as u,s as w}from"./D00syk5V.js";const L=u("h1",null,"横スクロール系のゲームを作るとしたらわっしょい",-1),k=16,y=64,b={__name:"mario",setup(E){const d=g(null),s=[],l={x:0,y:14};let o={k37:!1,space:!1,k39:!1},h=1,p=15,n={x:0,y:0},f={x:0,y:140};x(async()=>{console.log("on mounted."),console.log(d.value),m(),window.addEventListener("keydown",e=>{e.keyCode==37&&(o.k37=!0),e.keyCode==39&&(o.k39=!0),(e.keyCode==32||e.keyCode==38)&&(o.space=!0)}),window.addEventListener("keyup",e=>{e.keyCode==37&&(o.k37=!1),e.keyCode==39&&(o.k39=!1),(e.keyCode==32||e.keyCode==38)&&(o.space=!1)}),i()});let i=()=>{window.requestAnimationFrame(i),v(),_();let e=s.length;for(var t=0;t<e;t++){let c=s[t].length;for(var a=0;a<c;a++){let r=s[t][a];r.classList.contains("chara")&&r.classList.remove("chara")}}n.y+=h,f.y+=n.y,l.y=Math.floor(f.y/10),l.y=l.y<0?0:l.y,l.y>14&&(l.y=14,f.y=140,n.y=0),s[~~l.y][l.x].classList.add("chara")},v=()=>{o.k37&&l.x--,o.k39&&l.x++,o.space&&l.y==14&&(n.y-=p),l.x<0&&(l.x=y-1),l.x>y-1&&(l.x=0)},m=()=>{for(var e=0;e<k;e++){s[e]=[];for(var t=0;t<y;t++){let a=document.createElement("div");a.classList.add("static"),a.style.left=t*16+32+"px",a.style.top=e*16+96+"px",s[e][t]=a,e<6&&Math.random()<.25&&(a.style.backgroundColor="rgba("+Math.random()*256+","+Math.random()*256+","+Math.random()*256+",0.6)"),e==k-1&&a.classList.add("bottom"),d.value.appendChild(a)}}},_=()=>{let e=s.length;for(var t=0;t<e;t++){s[t].push(s[t].shift());let c=s[t].length;for(var a=0;a<c;a++){let r=s[t][a];r.style.left=a*16+32+"px"}}};return(e,t)=>(w(),C("div",null,[L,u("div",{class:"stage",ref_key:"stage",ref:d},null,512)]))}};export{b as default};
