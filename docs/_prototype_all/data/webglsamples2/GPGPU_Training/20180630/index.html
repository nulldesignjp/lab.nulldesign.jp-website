<!doctype html>
<html>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
<meta charset="UTF-8">
<meta http-equiv="Content-Language" content="ja">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="imagetoolbar" content="no">
<meta http-equiv="cleartype" content="on">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=yes, viewport-fit=cover">
<meta name="keywords" content="">
<meta name="description" content="">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://nulldesign.jp/metrogram3d/shared/img/120x120.png">
<link href="http://fonts.googleapis.com/css?family=EB+Garamond" rel="stylesheet" type="text/css">
<link href="shared/css/reset.css" rel="stylesheet" type="text/css" media="all">
<link href="shared/css/style.css" rel="stylesheet" type="text/css" media="all">
<title>nulldesign.study</title>
</head>
<body>
<div id="container">
<div id="siteHead">
<h1>nulldesign.study</h1>
<h2>Creative Coding....</h2>
<!--/ siteHead --></div>
<div id="siteBody">
<div id="main">
<h1>nulldesign.jp</h1>
<h2>Profile</h2>
<p>Hiroshi KOI.</span></p>
<p>Designer.</span></p>
<h2>Contents</h2>
<ul>
<li><a href="log/">.log</a></li>
<li><a href="metrogram/">metrogram</a></li>
<li><a href="metrogram3d/">metrogram3d</a></li>
</ul>
<h2>Awards</h2>
<ul>
<li>The Webby Awards 2016 NETART winner.</li>
<li>Yahoo! JAPAN internet creative award 2015 innovation: Silver.</li>
</ul>
</div>
<div id="webglView"><!--/ webglView --></div>
<!--/ siteBody --></div>
<div id="siteFoot"><p>COPYRIGHT &copy; 2018 nulldesign.jp <br>ALL RIGHTS RESERVED.</p>
<!--/ siteFoot --></div>
<!--/ container --></div>



<script type="x-shader/x-vertex" id="vertexShader">
#include <common>
uniform float time;
varying vec3 vPosition;
varying vec3 vNormal;
varying vec2 vUv;
void main()
{
    vPosition = position;
    vNormal = normalMatrix * normal;;
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
</script>
<script type="x-shader/x-fragment" id="fragmentShader">
#extension GL_OES_standard_derivatives : enable


uniform float time;

uniform vec3 planeColor;
uniform vec3 lightPosition;
uniform vec3 lightColor;
uniform vec3 ambientColor;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

uniform vec3 effectPosition;
uniform vec3 effectColor;
uniform float effectTime;
uniform bool effectEnabled;

varying vec3 vPosition;
varying vec3 vNormal;
varying vec2 vUv;

float easeInOutExpo(float t,float b,float c,float d)
{
    if (t==0.0) return b;
    if (t==d) return b+c;
    if ((t/=d/2.0) < 1.0) return c/2.0 * pow(2.0, 10.0 * (t - 1.0)) + b - c * 0.0005;
    return c/2.0 * 1.0005 * (-pow(2.0, -10.0 * --t) + 2.0) + b;
}

float easeOutExpo(float t,float b,float c,float d)
{
    return (t==d) ? b+c : c * 1.001 * (-pow(2.0, -10.0 * t/d) + 1.0) + b;
}

void main()
{
    //  色の調整
    vec3 materialColor = planeColor;
    if( effectEnabled )
    {
        if( effectTime < 2.0 )
        {
            float _range = 200.0 * ( effectTime / 2.0 );
            _range = easeOutExpo( effectTime, 0.0, 200.0, 2.0 );
            float dist = length( vPosition - effectPosition );
            if( dist < _range )
            {
              float _par = ( _range - dist ) / _range;
              materialColor += ( effectColor - materialColor ) * _par;
            }
        } else if( effectTime < 4.0 )
        {
            float dist = length( vPosition - effectPosition );
            if( dist < 200.0 )
            {
              float _par = ( 200.0 - dist ) / 200.0;
              materialColor += ( effectColor - materialColor ) * _par;
            }

            float _time = ( effectTime - 2.0 ) / 2.0;
            _time = easeInOutExpo( _time, 0.0, 1.0, 1.0 );
            materialColor += ( effectColor - materialColor ) * _time;
        } else {
            materialColor = effectColor;
            float _time = ( effectTime - 4.0 ) / 2.0;
            _time = easeInOutExpo( _time, 0.0, 1.0, 1.0 );
            materialColor += ( planeColor - effectColor ) * _time;
        }
    }


    //  LambertShader
    vec4 viewLightPosition = viewMatrix * vec4( lightPosition, 0.0 );
    vec3 N = normalize( vNormal );
    vec3 L = normalize( viewLightPosition.xyz );

    //  FLATSHADING
    vec3 dx = dFdx(vPosition.xyz);
    vec3 dy = dFdy(vPosition.xyz);
    N = normalize(cross(normalize(dx), normalize(dy)));


    float dotNL = dot( N, L );
    vec3 diffuse = materialColor * lightColor * max( dotNL, 0.0 );
    vec3 ambient = materialColor * ambientColor;
    gl_FragColor = vec4( diffuse + ambient, 0.8 );

    //  FOG
    #ifdef USE_FOG
        #ifdef USE_LOGDEPTHBUF_EXT
            float depth = gl_FragDepthEXT / gl_FragCoord.w;
        #else
            float depth = gl_FragCoord.z / gl_FragCoord.w;
        #endif
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
    #endif
}
</script>




<script type="text/javascript" src="shared/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="shared/js/three.min.js"></script>
<script type="text/javascript" src="shared/js/GPUComputationRenderer.js"></script>
<script type="text/javascript" src="shared/js/OrbitControls.js"></script>
<script type="text/javascript" src="shared/js/world.js"></script>
<script type="text/javascript" src="shared/js/CopyShader.js"></script>
<script type="text/javascript" src="shared/js/EffectComposer.js"></script>
<script type="text/javascript" src="shared/js/MaskPass.js"></script>
<script type="text/javascript" src="shared/js/RenderPass.js"></script>
<script type="text/javascript" src="shared/js/ShaderPass.js"></script>

<script type="text/javascript" src="shared/js/NoiseShader.js"></script>
<script type="text/javascript" src="shared/js/VignetteShader.js"></script>
<script type="text/javascript" src="shared/js/InvertShader.js"></script>
<script type="text/javascript" src="shared/js/LineShader.js"></script>
<script type="text/javascript" src="shared/js/RGBNoiseShader.js"></script>
<script type="text/javascript" src="shared/js/MonoShader.js"></script>
<script type="text/javascript" src="shared/js/BlurShader.js"></script>

<script type="text/javascript" src="shared/js/engine.js"></script>
</body>
</html>
