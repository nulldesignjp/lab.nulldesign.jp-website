<!doctype>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=yes">
<meta name="keywords" content="sandbox">
<meta name="description" content="">
<title>webgl sample</title>
<style>
html,body{height:100%;overflow:hidden;}
body{margin:0;padding:0;background:#000;color:#FFF;font-size:12px;font-family:Georgia;}
#container{width:100%;height:100%;}
canvas{position:fixed;left:0;top:0;}
h1,p{margin:0;padding:0;line-height:1;position:fixed;z-index:100;font-size:1em;}
h1{left:32px;top:32px;font-weight:normal;}
p{left:32px;bottom:32px;}
</style>
</head>
<body>
<h1>150413_02</h1>
<div id="container"></div>
<script src="jquery-2.1.3.min.js"></script>
<script src="Detector.js"></script>
<script src="perlin-noise-simplex.js"></script>
<script src="r71/three.min.js"></script>
<script src="world3d.js"></script>
<script type="x-shader/x-vertex" id="vertexshader">

//
varying vec3 vUv;

void main()
{
	vUv = position;
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position * 2.0, 1.0 );
}
</script>
<script type="x-shader/x-fragment" id="fragmentshader">
varying vec3 vUv;

void main()
{
	vec3 p = normalize( vUv );

	// p.x = ( p.x + 1.0 ) * 0.5;
	// p.y = ( p.y + 1.0 ) * 0.5;

	//	大きいほどグラデの円が小さくなる
	float par = 24.0;
	p.z = ( - p.z + 1.0 ) * 0.5;
	p.z = p.z * par + ( 1.0 - par );

	//	背景色
	vec3 bgColor = vec3( 0.0, 0.0, 1.0 );

	//	光の色
	vec3 lightColor = vec3( 0.0, 1.0, 0.0 );
	//	色の合算
	vec3 color = bgColor * ( 1.0 - p.z ) + lightColor * p.z;

	gl_FragColor = vec4( color, 1.0 );

}
</script>

<script type="text/javascript">
(function(){

	//	perlinNoise
	var _perlinNoise = new SimplexNoise();
	var _value = _perlinNoise.noise( 0, 0 );

	var _vertexShader = document.getElementById('vertexshader').textContent;
	var _fragmentShader = document.getElementById('fragmentshader').textContent;

	var _world = new world3d.three( document.getElementById('container') );

	var material = new THREE.ShaderMaterial({
		//uniform: uniforms,
		vertexShader: _vertexShader,
		fragmentShader: _fragmentShader,
		shading: THREE.FlatShading,
		side:THREE.BackSide
	});

	var geometry = new THREE.SphereGeometry( 1000, 16, 12 );
	var _mesh = new THREE.Mesh( geometry, material );
	_world.scene.add( _mesh );

})();
</script>
</body>
</html>