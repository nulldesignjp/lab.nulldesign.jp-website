<!DOCTYPE HTML>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=yes">
<meta name="keywords" content="">
<meta name="description" content="">
<title>metrogram</title>
</head>
<body>
<script type="text/javascript" src="../js/jquery-2.1.1.min.js"></script>
<script type="text/javascript">
(function(){

/*
https://developers.google.com/maps/documentation/elevation/?hl=ja
*/
var _nokori = [35.4, 35.402, 35.405, 35.409, 35.41, 35.412, 35.413, 35.415, 35.417, 35.419, 35.42, 35.422, 35.423, 35.425, 35.427, 35.429, 35.431, 35.433, 35.435, 35.437, 35.438, 35.441, 35.445, 35.448, 35.452, 35.456, 35.459, 35.463, 35.466, 35.47, 35.472, 35.475, 35.477, 35.48, 35.483, 35.486, 35.488, 35.492, 35.494, 35.498, 35.499, 35.5, 35.501, 35.502, 35.504, 35.506, 35.507, 35.508, 35.51, 35.512, 35.514, 35.515, 35.517, 35.519, 35.521, 35.523, 35.524, 35.525, 35.527, 35.528, 35.529, 35.53, 35.532, 35.533, 35.535, 35.536, 35.537, 35.538, 35.54, 35.542, 35.543, 35.544, 35.546, 35.548, 35.55, 35.551, 35.553, 35.555, 35.557, 35.559, 35.56, 35.562, 35.564, 35.566, 35.568, 35.569, 35.571, 35.573, 35.575, 35.577, 35.578, 35.58, 35.582, 35.584, 35.586, 35.587, 35.589, 35.591, 35.593, 35.595, 35.596, 35.598, 35.6, 35.602, 35.604, 35.605, 35.607, 35.609, 35.611, 35.613, 35.614, 35.616, 35.618, 35.62, 35.622, 35.623, 35.625, 35.627, 35.629, 35.631, 35.632, 35.634, 35.636, 35.638, 35.64, 35.641, 35.643, 35.645, 35.647, 35.649, 35.65, 35.652, 35.654, 35.656, 35.658, 35.659, 35.661, 35.663, 35.665, 35.667, 35.668, 35.67, 35.672, 35.674, 35.676, 35.677, 35.679, 35.681, 35.683, 35.685, 35.686, 35.688, 35.69, 35.692, 35.694, 35.695, 35.697, 35.699, 35.701, 35.703, 35.704, 35.706, 35.708, 35.71, 35.712, 35.713, 35.715, 35.717, 35.719, 35.721, 35.722, 35.724, 35.726, 35.728, 35.73, 35.731, 35.733, 35.735, 35.737, 35.739, 35.74, 35.742, 35.744, 35.746, 35.748, 35.749, 35.751, 35.753, 35.755, 35.757, 35.758, 35.76, 35.762, 35.764, 35.766, 35.767, 35.769, 35.771, 35.773, 35.775, 35.776, 35.777, 35.778, 35.779, 35.78, 35.781, 35.782, 35.783, 35.784, 35.785, 35.786, 35.787, 35.788, 35.789, 35.79, 35.791, 35.792, 35.793, 35.794, 35.795, 35.796, 35.797, 35.798, 35.799]

var _p = []
var _result = '';

var _span = 0.002;
//for( var i = 35.5; i < 35.55; i += _span )
//for( var i = 35.55; i < 35.6; i += _span )
//for( var i = 35.6; i < 35.65; i += _span )
//for( var i = 35.65; i < 35.7; i += _span )
//for( var i = 35.7; i < 35.75; i += _span )
//for( var i = 35.75; i < 35.8; i += _span )
for( var i = 35.5; i < 35.8; i += _span )
{
	var _x = Math.floor( i * 1000 ) / 1000;
	_p.push( _x + ',' + 139.5 + '|' + _x + ',' + 140 )
}

load()

function load()
{
	$('body').text(_p.length);
	if( _p.length )
	{
		var _po = _p.pop();
		loadPOS( _po, load );
	} else {
		$('body').text(_result);
	}
}

function loadPOS( _pos, _callback )
{
	$.ajax({
		url: 'http://maps.googleapis.com/maps/api/elevation/json?path='+_pos+'&samples=251&sensor=false',
		type: 'GET',
		dataType: 'json',
		success: function( _json )
		{
			//console.log( _json )
			if( _json.status == "OK" )
			{
				var _list = _json.results;
				var len = _list.length;
				for( var i = 0; i < len; i++ )
				{
					var _x = Math.round( _json.results[i].location.lat * 1000 ) / 1000;
					var _y = Math.round( _json.results[i].location.lng * 1000 ) / 1000;
					var _val1 = Math.round( _json.results[i].elevation * 1000 ) / 1000;
					var _val2 = Math.round( _json.results[i].resolution * 1000 ) / 1000;
					_result += '{"lat":'+_x+', "lng":'+_y+', "elev": '+_val1+', "reso":'+_val2+' },'
				}
				setTimeout( _callback, 200 );
			} else {
				setTimeout( _callback, 1000 );
			}
			
		},
		error: function(_json)
		{
			setTimeout( _callback, 1000 );
		}
	});	
}



/*
位置の高度をリクエストする例
次の例では、「マイル ハイ シティー」とも呼ばれるコロラド州デンバーの高度を JSON 形式でリクエストしています:
http://maps.googleapis.com/maps/api/elevation/json?locations=39.7391536,-104.9847034&sensor=true_or_false
{
   "results" : [
      {
         "elevation" : 1608.637939453125,
         "location" : {
            "lat" : 39.73915360,
            "lng" : -104.98470340
         },
         "resolution" : 4.771975994110107
      }
   ],
   "status" : "OK"
}

35.619748 139.612865 35.78835 139.95876734629

*/

})();
</script>
</body>
</html>