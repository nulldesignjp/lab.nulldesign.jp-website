(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{237:function(t,e,o){"use strict";o.r(e),o.d(e,"default",(function(){return f})),o.d(e,"Botan",(function(){return c})),o.d(e,"Kiku",(function(){return h})),o.d(e,"Fireworks",(function(){return v}));var r,l=o(110),n=o(111),m=(o(112),o(223)),f=function(){function t(e){Object(l.a)(this,t),r=this,this.param=e}return Object(n.a)(t,[{key:"dispose",value:function(){this.param=null}}]),t}(),c=function(){function t(e){Object(l.a)(this,t),r=this,this.param=e,this.mesh,this.init()}return Object(n.a)(t,[{key:"init",value:function(){for(var t=this.param,e=t.partCount,o=new m.d,l=[],n=[],f=[],c=[],h=[],v=new m.O,d=(new m.h).setHSL(0,.5,.55),i=0;i<e;i++){var y=Math.acos(2*i/e-1),M=Math.sqrt(e*Math.PI)*y;if(y+=.1*(Math.random()-.5),M+=.1*(Math.random()-.5),v.setFromSphericalCoords(50,y,M),0==this.param.shape){var k=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,D=3*i/e*Math.PI*2,x=Math.sin(k)*Math.cos(D)*50,w=Math.sin(k)*Math.sin(D)*50,_=50*Math.cos(k);v.x=x,v.y=w,v.z=_}l[3*i+0]=v.x,l[3*i+1]=v.y,l[3*i+2]=v.z,n[i]=4*t.partSize,f[i]=Math.random()<.05?200:0,f[i]*=t.partSizeVariance,c[3*i+0]=d.r,c[3*i+1]=d.g,c[3*i+2]=d.b,h[i]=Math.random()*t.flickerDensity}o.setAttribute("position",new m.m(l,3)),o.setAttribute("colors",new m.m(c,3)),o.setAttribute("size",new m.m(n,1).setUsage(m.k)),o.setAttribute("sizeVariances",new m.m(f,1).setUsage(m.k)),o.setAttribute("flickerDensity",new m.m(h,1).setUsage(m.k)),o.rotateX(Math.random()*Math.PI*2),o.rotateY(Math.random()*Math.PI*2),o.rotateZ(Math.random()*Math.PI*2),o.computeVertexNormals(),o.computeBoundingBox(),o.computeBoundingSphere();var P=new m.I({uniforms:{time:{value:0},texture0:{value:r.param.textures[2]},texture1:{value:r.param.textures[3]},color01:{value:t.partColors[0]},color02:{value:t.partColors[1]},color03:{value:t.partColors[2]},lifeTime:{value:t.lifeTime},masterFlickerDensity:{value:t.flickerDensity},releaseDuration:{value:t.releaseDuration},totalSize:{value:t.totalSize}},vertexShader:["uniform float time;","uniform float lifeTime;","uniform float masterFlickerDensity;","uniform float totalSize;","attribute float size;","attribute float sizeVariances;","attribute float flickerDensity;","attribute vec3 colors;","varying float vFlickerDensity;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","float easeOutCubic(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t + 1.0) + b;","}","float easeOutQuint(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t*t*t + 1.0) + b;","}","float easeOutExpo(float t,float b,float c,float d)","{","\treturn (t==d) ? b+c : c * 1.001 * (-pow(2.0, -10.0 * t/d) + 1.0) + b;","}","void main() {","\tvec3 pos = normalize( position );","\tfloat _time = time > lifeTime + masterFlickerDensity? lifeTime + masterFlickerDensity : time;","\tfloat fireScale = easeOutCubic( _time, 0.0, 1.0, lifeTime + masterFlickerDensity ) * totalSize;","\tvec3 _newPos = pos * fireScale * 50.0;","\t_newPos.y -= time * time * 2.5;","\tpos = _newPos;","\tvFlickerDensity = flickerDensity;","\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","\tgl_PointSize = ( size + sizeVariances * time / lifeTime ) * (100.0 / length(mvPosition.xyz));","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform float lifeTime;","uniform float releaseDuration;","uniform sampler2D texture0;","uniform sampler2D texture1;","uniform vec3 color01;","uniform vec3 color02;","uniform vec3 color03;","varying float vFlickerDensity;","float easeOutQuad(float t,float b,float c,float d)","{","\t return -c *(t/=d)*(t-2.0) + b;","}","void main( void ) {","\tvec4 tex0 = texture2D( texture0, gl_PointCoord );","\tvec4 tex1 = texture2D( texture1, gl_PointCoord );","\tfloat _par = easeOutQuad( time, 0.0, 1.0, lifeTime );","\tvec4 tex = mix( tex0, tex1, min( _par, 1.0 ) );","\tfloat _offset = 1.0 - ( time - ( lifeTime + vFlickerDensity ) ) / releaseDuration;","\tfloat _opacity = time / ( lifeTime + vFlickerDensity ) < 1.0? 1.0: _offset;","\tfloat _check = time / ( lifeTime + vFlickerDensity );","\tvec3 myColor = color01;","\tmyColor = mix(color01, color02, smoothstep(0.0, 0.5, _check));","\tmyColor = mix(color02, color03, smoothstep(0.5, 1.0, _check));","\tgl_FragColor = tex * vec4( myColor, max( _opacity, 0.0 ) );","}"].join("\n"),blending:m.b,depthTest:!1,transparent:!0,vertexColors:!0});this.mesh=new m.C(o,P)}},{key:"update",value:function(t){this.mesh.material.uniforms.time.value+=t}},{key:"dispose",value:function(){this.param=null}}]),t}(),h=function(){function t(e){Object(l.a)(this,t),r=this,this.param=e,this.mesh,this.init()}return Object(n.a)(t,[{key:"init",value:function(){for(var t=this.param,e=t.partCount,o=new m.d,r=[],l=[],n=[],f=[],c=new m.O,h=(new m.h).setHSL(0,.5,.55),i=0;i<e;i++){var v=50,d=Math.acos(2*i/e-1),y=Math.sqrt(e*Math.PI)*d;if(d+=.1*(Math.random()-.5),y+=.1*(Math.random()-.5),c.setFromSphericalCoords(v,d,y),0==this.param.shape){var M=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,k=3*i/e*Math.PI*2,D=Math.sin(M)*Math.cos(k)*v,x=Math.sin(M)*Math.sin(k)*v,w=Math.cos(M)*v;c.x=D,c.y=x,c.z=w}if(1==this.param.shape){M=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,k=Math.random()*Math.PI/3+Math.PI*(i%2),D=Math.sin(M)*Math.cos(k)*v,x=Math.sin(M)*Math.sin(k)*v,w=Math.cos(M)*v;c.x=D,c.y=x,c.z=w}if(2==this.param.shape){M=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,k=Math.random()*Math.PI/6+Math.PI/3*(i%6),D=Math.sin(M)*Math.cos(k)*v,x=Math.sin(M)*Math.sin(k)*v,w=Math.cos(M)*v;c.x=D,c.y=x,c.z=w}for(var _=t.partLength,P=0;P<_;P++)r[3*(i*_+P)+0]=c.x,r[3*(i*_+P)+1]=c.y,r[3*(i*_+P)+2]=c.z,l[3*(i*_+P)+0]=h.r,l[3*(i*_+P)+1]=h.g,l[3*(i*_+P)+2]=h.b,n[i*_+P]=Math.random()*t.flickerDensity,f[i*_+P]=Math.round(P/2)}o.setAttribute("position",new m.m(r,3)),o.setAttribute("colors",new m.m(l,3)),o.setAttribute("flickerDensity",new m.m(n,1).setUsage(m.k)),o.setAttribute("drawNumber",new m.m(f,1).setUsage(m.k)),o.rotateX(Math.random()*Math.PI*2),o.rotateY(Math.random()*Math.PI*2),o.rotateZ(Math.random()*Math.PI*2),o.computeVertexNormals(),o.computeBoundingBox(),o.computeBoundingSphere();var C=[];for(i=0;i<t.partLength;i++)C[i]=0;var F=new m.I({defines:{partLength:parseFloat(t.partLength)},uniforms:{time:{value:0},times:{value:C},color01:{value:t.partColors[0]},color02:{value:t.partColors[1]},color03:{value:t.partColors[2]},lifeTime:{value:t.lifeTime},masterFlickerDensity:{value:t.flickerDensity},releaseDuration:{value:t.releaseDuration},totalSize:{value:t.totalSize}},vertexShader:["uniform float time;","uniform float times["+t.partLength+"];","uniform float lifeTime;","uniform float masterFlickerDensity;","uniform float totalSize;","attribute vec3 colors;","attribute float flickerDensity;","attribute float drawNumber;","varying float vFlickerDensity;","varying float vDrawNumber;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","float easeOutCubic(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t + 1.0) + b;","}","float easeOutQuint(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t*t*t + 1.0) + b;","}","float easeOutExpo(float t,float b,float c,float d)","{","\treturn (t==d) ? b+c : c * 1.001 * (-pow(2.0, -10.0 * t/d) + 1.0) + b;","}","void main() {","\tvec3 pos = normalize( position );","\tint index = int(drawNumber);","\tfloat _timeValue = times[index];","\tfloat _time = _timeValue > lifeTime + masterFlickerDensity? lifeTime + masterFlickerDensity : _timeValue;","\tfloat fireScale = easeOutCubic( _time, 0.0, 1.0, lifeTime + masterFlickerDensity ) * totalSize;","\tvec3 _newPos = pos * fireScale * 50.0;","\t_newPos.y -= _timeValue * _timeValue * 2.5;","\tpos = _newPos;","\tvFlickerDensity = flickerDensity;","\tvDrawNumber = drawNumber;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform float lifeTime;","uniform float releaseDuration;","uniform vec3 color01;","uniform vec3 color02;","uniform vec3 color03;","varying float vFlickerDensity;","varying float vDrawNumber;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","void main( void ) {","\tfloat _offset = 1.0 - ( time - ( lifeTime + vFlickerDensity ) ) / releaseDuration;","\tfloat _opacity = time / ( lifeTime + vFlickerDensity ) < 1.0? 1.0: _offset;","\t_opacity = _opacity * ( 1.0 - vDrawNumber / float(partLength) );","\t_opacity = _opacity * _opacity * _opacity;","\tfloat _check = time / ( lifeTime + vFlickerDensity );","\tvec3 myColor = color01;","\tmyColor = mix(color01, color02, smoothstep(0.0, 0.5, _check));","\tmyColor = mix(color02, color03, smoothstep(0.5, 1.0, _check));","\tgl_FragColor = vec4( myColor, max( _opacity, 0.0 ) );","}"].join("\n"),blending:m.b,depthTest:!1,transparent:!0,vertexColors:!0});this.mesh=new m.s(o,F)}},{key:"update",value:function(t){this.mesh.material.uniforms.time.value+=t;for(var e=this.mesh.material.uniforms.times.value,o=e.length;o;)0==--o?e[0]+=t:e[o]=e[o-1]}},{key:"dispose",value:function(){this.param=null}}]),t}(),v=function(){function t(e){Object(l.a)(this,t),r=this,this.param=e,this.init()}return Object(n.a)(t,[{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"dispose",value:function(){this.param=null}}]),t}()}}]);