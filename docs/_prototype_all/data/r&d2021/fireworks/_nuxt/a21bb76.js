(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{229:function(t,e,o){var content=o(246);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(114).default)("1b7833da",content,!0,{sourceMap:!1})},245:function(t,e,o){"use strict";o(229)},246:function(t,e,o){var r=o(113)(!1);r.push([t.i,"body,html{margin:0;padding:0;overflow:hidden}body{background:#000}h1{position:fixed;left:16px;top:16px;z-index:100;margin:0;padding:0;line-height:1;font-size:1em;font-family:Georgia;font-weight:400;color:#fff;opacity:.6}.mapbox{margin:0 auto;min-height:100vh;display:flex;text-align:center;background:#000}",""]),t.exports=r},256:function(t,e,o){"use strict";o.r(e);o(37),o(242);var r=o(244),n=o.n(r),l=(o(58),o(223)),m=(new(o(1).a),o(110)),c=o(111),f=(o(60),o(165),o(112),function(){function t(e){Object(m.a)(this,t),this.param=e,this.mesh,this.init()}return Object(c.a)(t,[{key:"init",value:function(){for(var t=this.param,e=t.partCount,o=new l.d,r=[],n=[],m=[],c=[],f=[],h=new l.O,d=(new l.h).setHSL(0,.5,.55),i=0;i<e;i++){var v=Math.acos(2*i/e-1),y=Math.sqrt(e*Math.PI)*v;if(v+=.1*(Math.random()-.5),y+=.1*(Math.random()-.5),h.setFromSphericalCoords(50,v,y),0==this.param.shape){var M=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,w=3*i/e*Math.PI*2,x=Math.sin(M)*Math.cos(w)*50,k=Math.sin(M)*Math.sin(w)*50,D=50*Math.cos(M);h.x=x,h.y=k,h.z=D}r[3*i+0]=h.x,r[3*i+1]=h.y,r[3*i+2]=h.z,n[i]=4*t.partSize,m[i]=Math.random()<.05?200:0,m[i]*=t.partSizeVariance,c[3*i+0]=d.r,c[3*i+1]=d.g,c[3*i+2]=d.b,f[i]=Math.random()*t.flickerDensity}o.setAttribute("position",new l.m(r,3)),o.setAttribute("colors",new l.m(c,3)),o.setAttribute("size",new l.m(n,1).setUsage(l.k)),o.setAttribute("sizeVariances",new l.m(m,1).setUsage(l.k)),o.setAttribute("flickerDensity",new l.m(f,1).setUsage(l.k)),o.rotateX(Math.random()*Math.PI*2),o.rotateY(Math.random()*Math.PI*2),o.rotateZ(Math.random()*Math.PI*2),o.computeVertexNormals(),o.computeBoundingBox(),o.computeBoundingSphere();var _=new l.I({uniforms:{time:{value:0},texture0:{value:this.param.textures[2]},texture1:{value:this.param.textures[3]},color01:{value:t.partColors[0]},color02:{value:t.partColors[1]},color03:{value:t.partColors[2]},lifeTime:{value:t.lifeTime},masterFlickerDensity:{value:t.flickerDensity},releaseDuration:{value:t.releaseDuration},totalSize:{value:t.totalSize}},vertexShader:["uniform float time;","uniform float lifeTime;","uniform float masterFlickerDensity;","uniform float totalSize;","attribute float size;","attribute float sizeVariances;","attribute float flickerDensity;","attribute vec3 colors;","varying float vFlickerDensity;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","float easeOutCubic(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t + 1.0) + b;","}","float easeOutQuint(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t*t*t + 1.0) + b;","}","float easeOutExpo(float t,float b,float c,float d)","{","\treturn (t==d) ? b+c : c * 1.001 * (-pow(2.0, -10.0 * t/d) + 1.0) + b;","}","void main() {","\tvec3 pos = normalize( position );","\tfloat _time = time > lifeTime + masterFlickerDensity? lifeTime + masterFlickerDensity : time;","\tfloat fireScale = easeOutCubic( _time, 0.0, 1.0, lifeTime + masterFlickerDensity ) * totalSize;","\tvec3 _newPos = pos * fireScale * 50.0;","\t_newPos.y -= time * time * 2.5;","\tpos = _newPos;","\tvFlickerDensity = flickerDensity;","\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","\tgl_PointSize = ( size + sizeVariances * time / lifeTime ) * (100.0 / length(mvPosition.xyz));","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform float lifeTime;","uniform float releaseDuration;","uniform sampler2D texture0;","uniform sampler2D texture1;","uniform vec3 color01;","uniform vec3 color02;","uniform vec3 color03;","varying float vFlickerDensity;","float easeOutQuad(float t,float b,float c,float d)","{","\t return -c *(t/=d)*(t-2.0) + b;","}","void main( void ) {","\tvec4 tex0 = texture2D( texture0, gl_PointCoord );","\tvec4 tex1 = texture2D( texture1, gl_PointCoord );","\tfloat _par = easeOutQuad( time, 0.0, 1.0, lifeTime );","\tvec4 tex = mix( tex0, tex1, min( _par, 1.0 ) );","\tfloat _offset = 1.0 - ( time - ( lifeTime + vFlickerDensity ) ) / releaseDuration;","\tfloat _opacity = time / ( lifeTime + vFlickerDensity ) < 1.0? 1.0: _offset;","\tfloat _check = time / ( lifeTime + vFlickerDensity );","\tvec3 myColor = color01;","\tmyColor = mix(color01, color02, smoothstep(0.0, 0.5, _check));","\tmyColor = mix(color02, color03, smoothstep(0.5, 1.0, _check));","\tgl_FragColor = tex * vec4( myColor, max( _opacity, 0.0 ) );","}"].join("\n"),blending:l.b,depthTest:!1,transparent:!0,vertexColors:!0});this.mesh=new l.C(o,_)}},{key:"update",value:function(t){this.mesh.material.uniforms.time.value+=t}},{key:"dispose",value:function(){this.param=null}}]),t}()),h=function(){function t(e){Object(m.a)(this,t),this.param=e,this.mesh,this.init()}return Object(c.a)(t,[{key:"init",value:function(){for(var t=this.param,e=t.partCount,o=new l.d,r=[],n=[],m=[],c=[],f=new l.O,h=(new l.h).setHSL(0,.5,.55),i=0;i<e;i++){var d=50,v=Math.acos(2*i/e-1),y=Math.sqrt(e*Math.PI)*v;if(v+=.1*(Math.random()-.5),y+=.1*(Math.random()-.5),f.setFromSphericalCoords(d,v,y),0==this.param.shape){var M=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,w=3*i/e*Math.PI*2,x=Math.sin(M)*Math.cos(w)*d,k=Math.sin(M)*Math.sin(w)*d,D=Math.cos(M)*d;f.x=x,f.y=k,f.z=D}if(1==this.param.shape){M=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,w=Math.random()*Math.PI/3+Math.PI*(i%2),x=Math.sin(M)*Math.cos(w)*d,k=Math.sin(M)*Math.sin(w)*d,D=Math.cos(M)*d;f.x=x,f.y=k,f.z=D}if(2==this.param.shape){M=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,w=Math.random()*Math.PI/6+Math.PI/3*(i%6),x=Math.sin(M)*Math.cos(w)*d,k=Math.sin(M)*Math.sin(w)*d,D=Math.cos(M)*d;f.x=x,f.y=k,f.z=D}for(var _=t.partLength,z=0;z<_;z++)r[3*(i*_+z)+0]=f.x,r[3*(i*_+z)+1]=f.y,r[3*(i*_+z)+2]=f.z,n[3*(i*_+z)+0]=h.r,n[3*(i*_+z)+1]=h.g,n[3*(i*_+z)+2]=h.b,m[i*_+z]=Math.random()*t.flickerDensity,c[i*_+z]=Math.round(z/2)}o.setAttribute("position",new l.m(r,3)),o.setAttribute("colors",new l.m(n,3)),o.setAttribute("flickerDensity",new l.m(m,1).setUsage(l.k)),o.setAttribute("drawNumber",new l.m(c,1).setUsage(l.k)),o.rotateX(Math.random()*Math.PI*2),o.rotateY(Math.random()*Math.PI*2),o.rotateZ(Math.random()*Math.PI*2),o.computeVertexNormals(),o.computeBoundingBox(),o.computeBoundingSphere();var T=[];for(i=0;i<t.partLength;i++)T[i]=0;var P=new l.I({defines:{partLength:parseFloat(t.partLength)},uniforms:{time:{value:0},times:{value:T},color01:{value:t.partColors[0]},color02:{value:t.partColors[1]},color03:{value:t.partColors[2]},lifeTime:{value:t.lifeTime},masterFlickerDensity:{value:t.flickerDensity},releaseDuration:{value:t.releaseDuration},totalSize:{value:t.totalSize}},vertexShader:["uniform float time;","uniform float times["+t.partLength+"];","uniform float lifeTime;","uniform float masterFlickerDensity;","uniform float totalSize;","attribute vec3 colors;","attribute float flickerDensity;","attribute float drawNumber;","varying float vFlickerDensity;","varying float vDrawNumber;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","float easeOutCubic(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t + 1.0) + b;","}","float easeOutQuint(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t*t*t + 1.0) + b;","}","float easeOutExpo(float t,float b,float c,float d)","{","\treturn (t==d) ? b+c : c * 1.001 * (-pow(2.0, -10.0 * t/d) + 1.0) + b;","}","void main() {","\tvec3 pos = normalize( position );","\tint index = int(drawNumber);","\tfloat _timeValue = times[index];","\tfloat _time = _timeValue > lifeTime + masterFlickerDensity? lifeTime + masterFlickerDensity : _timeValue;","\tfloat fireScale = easeOutCubic( _time, 0.0, 1.0, lifeTime + masterFlickerDensity ) * totalSize;","\tvec3 _newPos = pos * fireScale * 50.0;","\t_newPos.y -= _timeValue * _timeValue * 2.5;","\tpos = _newPos;","\tvFlickerDensity = flickerDensity;","\tvDrawNumber = drawNumber;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform float lifeTime;","uniform float releaseDuration;","uniform vec3 color01;","uniform vec3 color02;","uniform vec3 color03;","varying float vFlickerDensity;","varying float vDrawNumber;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","void main( void ) {","\tfloat _offset = 1.0 - ( time - ( lifeTime + vFlickerDensity ) ) / releaseDuration;","\tfloat _opacity = time / ( lifeTime + vFlickerDensity ) < 1.0? 1.0: _offset;","\t_opacity = _opacity * ( 1.0 - vDrawNumber / float(partLength) );","\t_opacity = _opacity * _opacity * _opacity;","\tfloat _check = time / ( lifeTime + vFlickerDensity );","\tvec3 myColor = color01;","\tmyColor = mix(color01, color02, smoothstep(0.0, 0.5, _check));","\tmyColor = mix(color02, color03, smoothstep(0.5, 1.0, _check));","\tgl_FragColor = vec4( myColor, max( _opacity, 0.0 ) );","}"].join("\n"),blending:l.b,depthTest:!1,transparent:!0,vertexColors:!0});this.mesh=new l.s(o,P)}},{key:"update",value:function(t){this.mesh.material.uniforms.time.value+=t;for(var e=this.mesh.material.uniforms.times.value,o=e.length;o;)0==--o?e[0]+=t:e[o]=e[o-1]}},{key:"dispose",value:function(){this.param=null}}]),t}(),d=function(){function t(e){Object(m.a)(this,t),this.scene=e,this.intervalKey01,this.loopKey,this.textures,this.objectList,this.masterTime,this.init(),this.loop()}return Object(c.a)(t,[{key:"init",value:function(){console.log("fire field initialize.");var t=this;this.textures=[],this.textures[0]=(new l.L).load("assets/img/spark1.png"),this.textures[1]=(new l.L).load("assets/img/circle1.png"),this.textures[2]=(new l.L).load("assets/img/particle01.png"),this.textures[3]=(new l.L).load("assets/img/particle02.png"),this.textures[4]=(new l.L).load("assets/img/particle03.png"),this.objectList=[],this.masterTime=(new Date).getTime();var e=this.generateParams();this.fire(e),setInterval((function(){var e=t.generateParams();t.fire(e)}),1e3*Math.random())}},{key:"loop",value:function(){var t=this;this.loopKey=window.requestAnimationFrame((function(){t.loop()}));var e=(new Date).getTime(),o=(e-this.masterTime)/1e3;this.masterTime=e;for(var r=this.objectList.length;r;)for(var n in r--,this.objectList[r].instances){this.objectList[r].instances[n].update(o);var l=this.objectList[r].instances[n].mesh,m=this.objectList[r].instances[n].param.deadTime;if(l.material.uniforms.time.value>m){var c=this.objectList.splice(r,1);for(var f in c[0].instances){var h=c[0].instances[f];this.scene.remove(h.mesh),h.dispose()}c=null;break}}}},{key:"fire",value:function(t){for(var e=[],o=-1e3,i=0;i<t.length;i++){var r;r="BOTAN"==t[i].type?new f(t[i]):new h(t[i]),this.scene.add(r.mesh),r.mesh.position.set(t[i].position.x,t[i].position.y,t[i].position.z),e[i]=r,o=t[i].deadTime>o?t[i].deadTime:o}for(var n=["LayerE","LayerD","LayerC","LayerB","LayerA"],l={},m=t.length;m;)l[n[--m]]=e[m];var c={name:"name",date:(new Date).getTime(),instances:l,deadTime:o,fworks:{}};this.objectList.push(c)}},{key:"generateParams",value:function(){var t=new l.O,e=100*(1-Math.random()*Math.random()),o=Math.random()*Math.PI*2;t.x=Math.cos(o)*e,t.y=300*Math.random()+100,t.z=Math.sin(o)*e;for(var r=Math.floor(3*Math.random())+3,n=[],i=0;i<r;i++){var m=360*Math.random(),c=Math.random()*m,f=[{h:0,s:.85,l:.75},{h:120,s:.85,l:.75},{h:240,s:.85,l:.75},{h:60,s:.85,l:.75},{h:300,s:.85,l:.75},{h:0,s:0,l:.9},{h:60,s:.2,l:1}],h=(Math.random(),Math.random(),Math.random(),{type:Math.random()<.75?"BOTAN":"KIKU",shape:Math.floor(5*Math.random()),lifeTime:1.2,partCount:100*r-100*i,partSize:4+~~(6*Math.random()),partSizeVariance:1,flickerDensity:.5,partLength:24,partColors:[(new l.h).setHSL(Math.random(),.85,.75),(new l.h).setHSL(Math.random(),.85,.75),(new l.h).setHSL(Math.random(),.85,.75)],releaseDuration:.3,fworkSpeed:1,fworkAccel:10,fworkGravity:1,fworkHueMin:c,fworkHueMax:m,totalSize:(1+.1*Math.floor(10*Math.random()))*((i+1)/r+.1*(Math.random()-.5)),deadTime:1,position:t,textures:this.textures});h.deadTime=h.lifeTime+h.flickerDensity+h.releaseDuration,n[i]=h}return n}}]),t}(),v={data:function(){return{title:"MapBox + WebGL + nulldesign."}},created:function(){},mounted:function(){var t=this.$refs.mapbox,e=[139.763328,35.675069];n.a.accessToken="pk.eyJ1IjoibnVsbGRlc2lnbiIsImEiOiJjamZrcGdtbnowODdlMndzMmE2ZHc5anlrIn0.fsWuly11P-SWfGz9VntnSg";var map=new n.a.Map({container:t,style:"mapbox://styles/nulldesign/ckqkmzcme1ut218myioq9zhz1",zoom:17,center:e,pitch:60,tilt:45,antialias:!0});map.on("style.load",(function(){var t=function(t){var e=t,o=0,r=[Math.PI/2,0,0],m=n.a.MercatorCoordinate.fromLngLat(e,o),c={translateX:m.x,translateY:m.y,translateZ:m.z,rotateX:r[0],rotateY:r[1],rotateZ:r[2],scale:m.meterInMercatorCoordinateUnits()};return{id:"three-3d-model",type:"custom",renderingMode:"3d",onAdd:function(map,t){this.map=map,this.camera=new l.e,this.scene=new l.H;var e=new l.j(16777215);e.position.set(0,-70,100).normalize(),this.scene.add(e);var o=new l.j(16777215);o.position.set(0,70,100).normalize(),this.scene.add(o),this.renderer=new l.Q({canvas:map.getCanvas(),context:t,antialias:!0}),this.renderer.autoClear=!1},render:function(t,e){var o=(new l.w).makeRotationAxis(new l.O(1,0,0),c.rotateX),r=(new l.w).makeRotationAxis(new l.O(0,1,0),c.rotateY),n=(new l.w).makeRotationAxis(new l.O(0,0,1),c.rotateZ),m=(new l.w).fromArray(e),f=(new l.w).makeTranslation(c.translateX,c.translateY,c.translateZ).scale(new l.O(c.scale,-c.scale,c.scale)).multiply(o).multiply(r).multiply(n);this.camera.projectionMatrix=m.multiply(f),this.renderer.state.reset(),this.renderer.render(this.scene,this.camera),this.map.triggerRepaint()}}}(e);map.addLayer(t,"waterway-label");new d(t.scene)})),map.on("style.load",(function(){map.setFog({range:[-1,10.5],color:"black","horizon-blend":.1}),map.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.terrain-rgb",tileSize:512,maxzoom:14}),map.setTerrain({source:"mapbox-dem",exaggeration:1})}))}},y=(o(245),o(38)),component=Object(y.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h1",[t._v(t._s(t.title))]),t._v(" "),o("div",{ref:"mapbox",staticClass:"mapbox"})])}),[],!1,null,null,null);e.default=component.exports}}]);