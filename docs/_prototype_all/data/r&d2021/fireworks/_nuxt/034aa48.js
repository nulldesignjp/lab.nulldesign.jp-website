(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{231:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x})),n.d(t,"FilterWorld",(function(){return S})),n.d(t,"BackBufferWorld",(function(){return z}));n(232);var r,o=n(239),c=n(240),l=n(241),m=n(225),h=n(110),d=n(111),f=(n(37),n(165),n(223)),v=n(226),w=n(233),y=(n(224),n(234)),k=n(228),O=n(235);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var x=function(){function e(t,n,o){Object(h.a)(this,e),r=this,this.scene,this.camera,this.focus,this.renderer,this.clock,this.time,this.timeScale,this.delta,this.animationKey,this.controls,this.raycaster,this.composer,n=null==n?16777215:n,o=null==o?0:o,this.init(t,n),window.addEventListener("resize",r.resize),this.resize()}return Object(d.a)(e,[{key:"init",value:function(e,t){this.clock=new f.g,this.time=0,this.delta=0;var n=window.innerWidth,r=window.innerHeight;this.scene=new f.H,this.camera=new f.B(60,n/r,.01,1e3),this.camera.position.set(0,0,500),this.focus=new f.O(0,0,0),this.renderer=new f.Q({antialias:!0,canvas:e}),this.renderer.setSize(n,r),this.renderer.setClearColor(t),this.renderer.render(this.scene,this.camera),this.controls=new O.a(this.camera,this.renderer.domElement),this.controls.autoRotate=!1,this.controls.autoRotateSpeed=.2,this.controls.enableDamping=!0,this.controls.dampingFactor=.15,this.controls.enableZoom=!0,this.controls.enabled=!0,this.controls.target=this.focus}},{key:"render",value:function(){r.animationKey=window.requestAnimationFrame((function(e){r.render(e)})),r.delta=r.clock.getDelta(),r.time+=r.delta*r.timeScale,r.controls.update(),r.camera.lookAt(r.focus),r.renderer.render(r.scene,r.camera)}},{key:"resize",value:function(){console.log("resize....");var e=window.innerWidth,t=window.innerHeight;r.renderer.setSize(e,t),r.camera.aspect?r.camera.aspect=e/t:(r.camera.left=.5*-e,r.camera.right=.5*e,r.camera.bottom=.5*-t,r.camera.top=.5*t),r.camera.updateProjectionMatrix()}},{key:"getWorldToScreen2D",value:function(e){var t=new f.O,n=this.renderer.getContext(),r=.5*n.canvas.width,o=.5*n.canvas.height;e.updateMatrixWorld(),t.setFromMatrixPosition(e.matrixWorld),t.project(this.camera),t.x=t.x*r+r,t.y=-t.y*o+o;var c=(new f.O).subVectors(this.focus,this.camera.position),l=(new f.O).subVectors(e.position,this.camera.position);return c.dot(l)<=0&&(t.x=-9999,t.y=-9999),{x:t.x,y:t.y}}},{key:"focalLengthToFOV",value:function(e){var t=this.camera.filmGauge,n=2*t/3,r=Math.sqrt(t*t+n*n);this.camera.fov=180/Math.PI*Math.atan(r/(2*e))*2,this.camera.updateProjectionMatrix()}},{key:"pixelEqualMagnification",value:function(){return.5*window.innerHeight/Math.tan(.5*_world.camera.fov*Math.PI/180)}},{key:"add",value:function(e){this.scene.add(e)}},{key:"remove",value:function(e){if(e.geometry.dispose(),null!=e.material.uniforms)for(var i in e.material.uniforms)null!=e.material.uniforms[i].value.dispose&&e.material.uniforms[i].value.dispose();null!=e.material.map&&e.material.map.dispose(),this.scene.remove(e)}},{key:"renderStart",value:function(){this.renderStop(),this.clock.start(),this.render(0)}},{key:"renderStop",value:function(){window.cancelAnimationFrame(this.animationKey),this.clock.stop()}},{key:"addDeviceOrientationControls",value:function(){r.controls=new DeviceOrientationControls(r.camera),r.controls.connect(),r.camera.position.y=5,window.addEventListener("devicemotion",r.addDevicemotion,!1)}},{key:"addDevicemotion",value:function(e){}},{key:"dispose",value:function(){this.renderStop(),window.removeEventListener("resize",r.resize),window.removeEventListener("devicemotion",r.addDevicemotion),this.scene.dispose(),this.renderer.dispose(),this.controls.dispose(),this.scene=null,this.renderer=null,this.controls=null,r=null,this.camera=null,this.focus=null,this.clock=null,this.time=null,this.timeScale=null,this.animationKey=null,this.raycaster=null,this.composer=null}}]),e}(),S=function(e){Object(c.a)(n,e);var t=j(n);function n(e,o,c){var l;return Object(h.a)(this,n),l=t.call(this,e,o,c),console.log(r.composer),l}return Object(d.a)(n,[{key:"init",value:function(e,t){Object(o.a)(Object(m.a)(n.prototype),"init",this).call(this,e,t);var r=window.innerWidth,c=window.innerHeight;this.composer=new y.a(this.renderer),this.composer.setSize(r,c),this.composer.addPass(new w.a(this.scene,this.camera));var l=new v.a(k.a);l.renderToScreen=!0,this.composer.addPass(l)}},{key:"render",value:function(){r.animationKey=window.requestAnimationFrame((function(e){r.render()}));var e=r.clock.getDelta();r.time+=e,r.renderer.render(r.scene,r.camera);for(var t=r.composer.passes.length,i=1;i<t-1;i++)r.composer.passes[i].uniforms&&r.composer.passes[i].uniforms.time&&(r.composer.passes[i].uniforms.time.value+=e);r.composer.render()}},{key:"resize",value:function(){for(var e=window.innerWidth,t=window.innerHeight,n=r.composer.passes.length,i=1;i<n-1;i++)r.composer.passes[i].uniforms&&r.composer.passes[i].uniforms.resolution&&(r.composer.passes[i].uniforms.resolution.value.x=e,r.composer.passes[i].uniforms.resolution.value.y=t);r.renderer.setSize(e,t),r.composer.setSize(e,t),r.camera.aspect?r.camera.aspect=e/t:(r.camera.left=.5*-e,r.camera.right=.5*e,r.camera.bottom=.5*-t,r.camera.top=.5*t),r.camera.updateProjectionMatrix(),r.composer.render()}},{key:"addPass",value:function(e){var t=r.composer.passes.length;r.composer.passes.splice(t-1,0,e),console.log(r.composer.passes)}},{key:"removePass",value:function(e){var t=r.composer.passes.length;e=e<1?1:e>t-2?t-2:e,r.composer.passes.splice(e,1)}}]),n}(x),z=function(e){Object(c.a)(n,e);var t=j(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return n}(S)}}]);