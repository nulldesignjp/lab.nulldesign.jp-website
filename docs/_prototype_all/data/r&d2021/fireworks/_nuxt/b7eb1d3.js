(window.webpackJsonp=window.webpackJsonp||[]).push([[2,6,8,10],{231:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return z})),r.d(t,"FilterWorld",(function(){return D})),r.d(t,"BackBufferWorld",(function(){return P}));r(232);var o,n=r(239),l=r(240),c=r(241),m=r(225),f=r(110),h=r(111),d=(r(37),r(165),r(223)),v=r(226),w=r(233),y=(r(224),r(234)),M=r(228),k=r(235);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Object(m.a)(e);if(t){var n=Object(m.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(c.a)(this,r)}}var z=function(){function e(t,r,n){Object(f.a)(this,e),o=this,this.scene,this.camera,this.focus,this.renderer,this.clock,this.time,this.timeScale,this.delta,this.animationKey,this.controls,this.raycaster,this.composer,r=null==r?16777215:r,n=null==n?0:n,this.init(t,r),window.addEventListener("resize",o.resize),this.resize()}return Object(h.a)(e,[{key:"init",value:function(e,t){this.clock=new d.g,this.time=0,this.delta=0;var r=window.innerWidth,o=window.innerHeight;this.scene=new d.H,this.camera=new d.B(60,r/o,.01,1e3),this.camera.position.set(0,0,500),this.focus=new d.O(0,0,0),this.renderer=new d.Q({antialias:!0,canvas:e}),this.renderer.setSize(r,o),this.renderer.setClearColor(t),this.renderer.render(this.scene,this.camera),this.controls=new k.a(this.camera,this.renderer.domElement),this.controls.autoRotate=!1,this.controls.autoRotateSpeed=.2,this.controls.enableDamping=!0,this.controls.dampingFactor=.15,this.controls.enableZoom=!0,this.controls.enabled=!0,this.controls.target=this.focus}},{key:"render",value:function(){o.animationKey=window.requestAnimationFrame((function(e){o.render(e)})),o.delta=o.clock.getDelta(),o.time+=o.delta*o.timeScale,o.controls.update(),o.camera.lookAt(o.focus),o.renderer.render(o.scene,o.camera)}},{key:"resize",value:function(){console.log("resize....");var e=window.innerWidth,t=window.innerHeight;o.renderer.setSize(e,t),o.camera.aspect?o.camera.aspect=e/t:(o.camera.left=.5*-e,o.camera.right=.5*e,o.camera.bottom=.5*-t,o.camera.top=.5*t),o.camera.updateProjectionMatrix()}},{key:"getWorldToScreen2D",value:function(e){var t=new d.O,r=this.renderer.getContext(),o=.5*r.canvas.width,n=.5*r.canvas.height;e.updateMatrixWorld(),t.setFromMatrixPosition(e.matrixWorld),t.project(this.camera),t.x=t.x*o+o,t.y=-t.y*n+n;var l=(new d.O).subVectors(this.focus,this.camera.position),c=(new d.O).subVectors(e.position,this.camera.position);return l.dot(c)<=0&&(t.x=-9999,t.y=-9999),{x:t.x,y:t.y}}},{key:"focalLengthToFOV",value:function(e){var t=this.camera.filmGauge,r=2*t/3,o=Math.sqrt(t*t+r*r);this.camera.fov=180/Math.PI*Math.atan(o/(2*e))*2,this.camera.updateProjectionMatrix()}},{key:"pixelEqualMagnification",value:function(){return.5*window.innerHeight/Math.tan(.5*_world.camera.fov*Math.PI/180)}},{key:"add",value:function(e){this.scene.add(e)}},{key:"remove",value:function(e){if(e.geometry.dispose(),null!=e.material.uniforms)for(var i in e.material.uniforms)null!=e.material.uniforms[i].value.dispose&&e.material.uniforms[i].value.dispose();null!=e.material.map&&e.material.map.dispose(),this.scene.remove(e)}},{key:"renderStart",value:function(){this.renderStop(),this.clock.start(),this.render(0)}},{key:"renderStop",value:function(){window.cancelAnimationFrame(this.animationKey),this.clock.stop()}},{key:"addDeviceOrientationControls",value:function(){o.controls=new DeviceOrientationControls(o.camera),o.controls.connect(),o.camera.position.y=5,window.addEventListener("devicemotion",o.addDevicemotion,!1)}},{key:"addDevicemotion",value:function(e){}},{key:"dispose",value:function(){this.renderStop(),window.removeEventListener("resize",o.resize),window.removeEventListener("devicemotion",o.addDevicemotion),this.scene.dispose(),this.renderer.dispose(),this.controls.dispose(),this.scene=null,this.renderer=null,this.controls=null,o=null,this.camera=null,this.focus=null,this.clock=null,this.time=null,this.timeScale=null,this.animationKey=null,this.raycaster=null,this.composer=null}}]),e}(),D=function(e){Object(l.a)(r,e);var t=x(r);function r(e,n,l){var c;return Object(f.a)(this,r),c=t.call(this,e,n,l),console.log(o.composer),c}return Object(h.a)(r,[{key:"init",value:function(e,t){Object(n.a)(Object(m.a)(r.prototype),"init",this).call(this,e,t);var o=window.innerWidth,l=window.innerHeight;this.composer=new y.a(this.renderer),this.composer.setSize(o,l),this.composer.addPass(new w.a(this.scene,this.camera));var c=new v.a(M.a);c.renderToScreen=!0,this.composer.addPass(c)}},{key:"render",value:function(){o.animationKey=window.requestAnimationFrame((function(e){o.render()}));var e=o.clock.getDelta();o.time+=e,o.renderer.render(o.scene,o.camera);for(var t=o.composer.passes.length,i=1;i<t-1;i++)o.composer.passes[i].uniforms&&o.composer.passes[i].uniforms.time&&(o.composer.passes[i].uniforms.time.value+=e);o.composer.render()}},{key:"resize",value:function(){for(var e=window.innerWidth,t=window.innerHeight,r=o.composer.passes.length,i=1;i<r-1;i++)o.composer.passes[i].uniforms&&o.composer.passes[i].uniforms.resolution&&(o.composer.passes[i].uniforms.resolution.value.x=e,o.composer.passes[i].uniforms.resolution.value.y=t);o.renderer.setSize(e,t),o.composer.setSize(e,t),o.camera.aspect?o.camera.aspect=e/t:(o.camera.left=.5*-e,o.camera.right=.5*e,o.camera.bottom=.5*-t,o.camera.top=.5*t),o.camera.updateProjectionMatrix(),o.composer.render()}},{key:"addPass",value:function(e){var t=o.composer.passes.length;o.composer.passes.splice(t-1,0,e),console.log(o.composer.passes)}},{key:"removePass",value:function(e){var t=o.composer.passes.length;e=e<1?1:e>t-2?t-2:e,o.composer.passes.splice(e,1)}}]),r}(z),P=function(e){Object(l.a)(r,e);var t=x(r);function r(){return Object(f.a)(this,r),t.apply(this,arguments)}return r}(D)},236:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var o,n=r(110),l=r(111),c=(r(112),r(165),r(37),r(223)),m=function(){function e(t){Object(n.a)(this,e),o=this,this.world=t,this.distance,this.fireHeight,this.textures,this.particles,this.fireworks,this.init()}return Object(l.a)(e,[{key:"init",value:function(){this.distance=200,this.fireHeight=100,this.textures=[(new c.L).load("/assets/img/spark1.png"),(new c.L).load("/assets/img/circle1.png")],this.particles=[],this.fireworks=[];var e=new c.Geometry;e.vertices[0]=new c.O(-50,0,0),e.vertices[1]=new c.O(50,0,0);var t=new c.r({transparent:!0,opacity:.2}),r=new c.q(e,t);this.world.add(r),r.position.z=-this.distance}},{key:"update",value:function(){o.updateFireWorks(),o.updateParticles()}},{key:"addFire",value:function(e){o.createFireWorks(e)}},{key:"removeFire",value:function(){}},{key:"createFireWorks",value:function(e){console.log("createFireWorks",e);var t=~~((e.fworkHueMax-e.fworkHueMin)*Math.random())+e.fworkHueMin;t/=360;for(var r=new c.d,n=[],l=[],m=[],f=[],h=new c.h,d=64,i=0;i<d;i++)n.push(0),n.push(0),n.push(0),h.setHSL(t,1,.5),l.push(h.r,h.g,h.b),m.push(i/d*i/d*i/d*i/d*i/d*3),f.push(d-i);r.setAttribute("position",new c.m(n,3)),r.setAttribute("colors",new c.m(l,3)),r.setAttribute("size",new c.m(m,1).setUsage(c.k)),r.setAttribute("idx",new c.m(f,1).setUsage(c.k));var v=new c.I({uniforms:{time:{value:0},texture:{value:o.textures[1]}},vertexShader:["uniform float time;","attribute float size;","attribute float idx;","attribute vec3 colors;","varying float vIdx;","varying float rand;","varying vec3 vColors;","highp float random(vec2 co){","    highp float a = 12.9898;","    highp float b = 78.233;","    highp float c = 43758.5453;","    highp float dt= dot(co.xy ,vec2(a,b));","    highp float sn= mod(dt,3.14);","    return fract(sin(sn) * c);","}","","float noise2(vec2 st)","{","    vec2 p = floor(st);","    return random(p);","}","","float noise3(vec2 st)","{","    vec2 p = floor(st);","    return random(p + vec2(time,0.0));","}","","float valueNoise(vec2 st)","{","    vec2 p = floor(st);","    vec2 f = fract(st);","","    float v00 = random( p + vec2( 0, 0 ) );","    float v10 = random( p + vec2( 1, 0 ) );","    float v01 = random( p + vec2( 0, 1 ) );","    float v11 = random( p + vec2( 1, 1 ) );","","    vec2 u = f * f * (3.0 - 2.0 * f);","","    float v0010 = mix(v00, v10, u.x);","    float v0111 = mix(v01, v11, u.x);","    return mix(v0010, v0111, u.y);","}","","vec2 random2(vec2 st){","       vec2 _st = vec2( dot(st,vec2(127.1,311.7)),","                      dot(st,vec2(269.5,183.3)));","       return -1.0 + 2.0 * fract( sin(_st) * 43758.5453123 );","   }","","float perlinNoise(vec2 st)","{","    vec2 p = floor(st);","    vec2 f = fract(st);","    vec2 u = f*f*(3.0-2.0*f);","","    vec2 v00 = random2( p + vec2(0,0) );","    vec2 v10 = random2( p + vec2(1,0) );","    vec2 v01 = random2( p + vec2(0,1) );","    vec2 v11 = random2( p + vec2(1,1) );","","    return mix( mix( dot( v00, f - vec2(0,0) ), dot( v10, f - vec2(1,0) ), u.x ),","                 mix( dot( v01, f - vec2(0,1) ), dot( v11, f - vec2(1,1) ), u.x ),","                 u.y ) + 0.5;","}","","float fBm (vec2 st)","{","    float f = 0.0;","    vec2 q = st;","","    f += 0.5000 * perlinNoise( q ); q = q*2.01;","    f += 0.2500 * perlinNoise( q ); q = q*2.02;","    f += 0.1250 * perlinNoise( q ); q = q*2.03;","    f += 0.0625 * perlinNoise( q ); q = q*2.01;","","    return f;","}","void main() {","\tvec3 pos = position;","\tpos.y +=  - idx * 0.6;","\tpos.x += ( perlinNoise( pos.yz * 2.1 + vec2(time,time) ) - 0.5 ) * 0.75;","\tpos.z += ( perlinNoise( pos.xy * 2.1 - vec2( -time, -time ) ) - 0.5 ) * 0.75;","\tvIdx = 1.0 - idx / 64.0;","\trand = perlinNoise( pos.yz * 12.1 + vec2( time, 0.0 ) ) * 0.5 + 0.5;","\tvColors = colors;","\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","   gl_PointSize = size * (800.0 / length(mvPosition.xyz));","gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform sampler2D texture;","varying float vIdx;","varying float rand;","varying vec3 vColors;","void main( void ) {","\tvec4 tex = texture2D( texture, gl_PointCoord );","\tgl_FragColor = tex * vec4( vColors, 1.0 );","\tgl_FragColor.a *= vIdx * vIdx * vIdx * rand;","}"].join("\n"),blending:c.b,depthTest:!1,transparent:!0,vertexColors:!0}),w=new c.C(r,v);o.world.add(w),w.position.x=e.position.x,w.position.y=e.position.y,w.position.z=e.position.z,e.start=new c.O,e.end=new c.O(0,o.fireHeight,0);var y={};y.mesh=w,y.param=e,o.fireworks.push(y)}},{key:"updateFireWorks",value:function(){for(var e=this.fireworks.length;e;){e--;var t=this.fireworks[e].mesh,r=this.fireworks[e].param;t.material.uniforms.time.value+=1/60,t.position.y+=r.fworkSpeed,t.position.y>o.fireHeight&&(r.start=t.position.clone(),o.world.remove(t),r.mesh=null,o.createParticles(r),o.fireworks.splice(e,1),t.geometry.dispose(),null!=t.material.map&&t.material.uniforms.map.dispose(),t.material.dispose(),t.geometry=null,t.material=null,t=null)}}},{key:"createParticles",value:function(e){console.log("createParticles",e);var t=~~((e.partHueMax-e.partHueMin)*Math.random())+e.partHueMin;t/=360;for(var r=e.partCount,n=new c.Geometry,i=0;i<r;i++){var l=5*(1-Math.random()*Math.random()),m=Math.acos(2*i/r-1),f=Math.sqrt(r*Math.PI)*m;n.vertices[i]=new c.O,n.vertices[i].setFromSphericalCoords(l,m,f).multiplyScalar(2)}n.rotateX(Math.random()*Math.PI*2),n.rotateY(Math.random()*Math.PI*2),n.rotateZ(Math.random()*Math.PI*2);var h=new c.D({transparent:!0,opacity:1,map:o.textures[0],blending:c.b,depthTest:!1,size:e.partSize,color:(new c.h).setHSL(t,.96,.6+.25*Math.random())}),d=new c.C(n,h);o.world.add(d),d.position.x=e.start.x,d.position.y=e.start.y,d.position.z=e.start.z;var v={};v.mesh=d,v.param=e,o.particles.push(v)}},{key:"updateParticles",value:function(){for(var e=this.particles.length;e;){e--;var t=this.particles[e].mesh,r=this.particles[e].param;r.lifeTime-=1/60,t.material.size=o.easeInExpo(1-r.lifeTime/r.lifeTimeMaster,r.partSize,-r.partSize,1);for(var n=t.geometry.vertices.length;n;){n--;var l=t.geometry.vertices[n].clone();l.normalize();var c=r.lifeTime/r.lifeTimeMaster;t.geometry.vertices[n].add(l.multiplyScalar(c*c*c*r.partSpeed));var m=1-c;t.geometry.vertices[n].y-=.5*r.partGravity*m*m}t.geometry.verticesNeedUpdate=!0,r.lifeTime<0&&(o.world.remove(t),r.mesh=null,o.particles.splice(e,1))}}},{key:"dispose",value:function(){}},{key:"easeInExpo",value:function(e,b,t,r){return 0==e?b:t*Math.pow(2,10*(e/r-1))+b-.001*t}}]),e}()},237:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m})),r.d(t,"Botan",(function(){return f})),r.d(t,"Kiku",(function(){return h})),r.d(t,"Fireworks",(function(){return d}));var o,n=r(110),l=r(111),c=(r(112),r(223)),m=function(){function e(t){Object(n.a)(this,e),o=this,this.param=t}return Object(l.a)(e,[{key:"dispose",value:function(){this.param=null}}]),e}(),f=function(){function e(t){Object(n.a)(this,e),o=this,this.param=t,this.mesh,this.init()}return Object(l.a)(e,[{key:"init",value:function(){for(var e=this.param,t=e.partCount,r=new c.d,n=[],l=[],m=[],f=[],h=[],d=new c.O,v=(new c.h).setHSL(0,.5,.55),i=0;i<t;i++){var w=Math.acos(2*i/t-1),y=Math.sqrt(t*Math.PI)*w;if(w+=.1*(Math.random()-.5),y+=.1*(Math.random()-.5),d.setFromSphericalCoords(50,w,y),0==this.param.shape){var M=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,k=3*i/t*Math.PI*2,x=Math.sin(M)*Math.cos(k)*50,z=Math.sin(M)*Math.sin(k)*50,D=50*Math.cos(M);d.x=x,d.y=z,d.z=D}n[3*i+0]=d.x,n[3*i+1]=d.y,n[3*i+2]=d.z,l[i]=4*e.partSize,m[i]=Math.random()<.05?200:0,m[i]*=e.partSizeVariance,f[3*i+0]=v.r,f[3*i+1]=v.g,f[3*i+2]=v.b,h[i]=Math.random()*e.flickerDensity}r.setAttribute("position",new c.m(n,3)),r.setAttribute("colors",new c.m(f,3)),r.setAttribute("size",new c.m(l,1).setUsage(c.k)),r.setAttribute("sizeVariances",new c.m(m,1).setUsage(c.k)),r.setAttribute("flickerDensity",new c.m(h,1).setUsage(c.k)),r.rotateX(Math.random()*Math.PI*2),r.rotateY(Math.random()*Math.PI*2),r.rotateZ(Math.random()*Math.PI*2),r.computeVertexNormals(),r.computeBoundingBox(),r.computeBoundingSphere();var P=new c.I({uniforms:{time:{value:0},texture0:{value:o.param.textures[2]},texture1:{value:o.param.textures[3]},color01:{value:e.partColors[0]},color02:{value:e.partColors[1]},color03:{value:e.partColors[2]},lifeTime:{value:e.lifeTime},masterFlickerDensity:{value:e.flickerDensity},releaseDuration:{value:e.releaseDuration},totalSize:{value:e.totalSize}},vertexShader:["uniform float time;","uniform float lifeTime;","uniform float masterFlickerDensity;","uniform float totalSize;","attribute float size;","attribute float sizeVariances;","attribute float flickerDensity;","attribute vec3 colors;","varying float vFlickerDensity;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","float easeOutCubic(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t + 1.0) + b;","}","float easeOutQuint(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t*t*t + 1.0) + b;","}","float easeOutExpo(float t,float b,float c,float d)","{","\treturn (t==d) ? b+c : c * 1.001 * (-pow(2.0, -10.0 * t/d) + 1.0) + b;","}","void main() {","\tvec3 pos = normalize( position );","\tfloat _time = time > lifeTime + masterFlickerDensity? lifeTime + masterFlickerDensity : time;","\tfloat fireScale = easeOutCubic( _time, 0.0, 1.0, lifeTime + masterFlickerDensity ) * totalSize;","\tvec3 _newPos = pos * fireScale * 50.0;","\t_newPos.y -= time * time * 2.5;","\tpos = _newPos;","\tvFlickerDensity = flickerDensity;","\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","\tgl_PointSize = ( size + sizeVariances * time / lifeTime ) * (100.0 / length(mvPosition.xyz));","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform float lifeTime;","uniform float releaseDuration;","uniform sampler2D texture0;","uniform sampler2D texture1;","uniform vec3 color01;","uniform vec3 color02;","uniform vec3 color03;","varying float vFlickerDensity;","float easeOutQuad(float t,float b,float c,float d)","{","\t return -c *(t/=d)*(t-2.0) + b;","}","void main( void ) {","\tvec4 tex0 = texture2D( texture0, gl_PointCoord );","\tvec4 tex1 = texture2D( texture1, gl_PointCoord );","\tfloat _par = easeOutQuad( time, 0.0, 1.0, lifeTime );","\tvec4 tex = mix( tex0, tex1, min( _par, 1.0 ) );","\tfloat _offset = 1.0 - ( time - ( lifeTime + vFlickerDensity ) ) / releaseDuration;","\tfloat _opacity = time / ( lifeTime + vFlickerDensity ) < 1.0? 1.0: _offset;","\tfloat _check = time / ( lifeTime + vFlickerDensity );","\tvec3 myColor = color01;","\tmyColor = mix(color01, color02, smoothstep(0.0, 0.5, _check));","\tmyColor = mix(color02, color03, smoothstep(0.5, 1.0, _check));","\tgl_FragColor = tex * vec4( myColor, max( _opacity, 0.0 ) );","}"].join("\n"),blending:c.b,depthTest:!1,transparent:!0,vertexColors:!0});this.mesh=new c.C(r,P)}},{key:"update",value:function(e){this.mesh.material.uniforms.time.value+=e}},{key:"dispose",value:function(){this.param=null}}]),e}(),h=function(){function e(t){Object(n.a)(this,e),o=this,this.param=t,this.mesh,this.init()}return Object(l.a)(e,[{key:"init",value:function(){for(var e=this.param,t=e.partCount,r=new c.d,o=[],n=[],l=[],m=[],f=new c.O,h=(new c.h).setHSL(0,.5,.55),i=0;i<t;i++){var d=50,v=Math.acos(2*i/t-1),w=Math.sqrt(t*Math.PI)*v;if(v+=.1*(Math.random()-.5),w+=.1*(Math.random()-.5),f.setFromSphericalCoords(d,v,w),0==this.param.shape){var y=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,M=3*i/t*Math.PI*2,k=Math.sin(y)*Math.cos(M)*d,x=Math.sin(y)*Math.sin(M)*d,z=Math.cos(y)*d;f.x=k,f.y=x,f.z=z}if(1==this.param.shape){y=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,M=Math.random()*Math.PI/3+Math.PI*(i%2),k=Math.sin(y)*Math.cos(M)*d,x=Math.sin(y)*Math.sin(M)*d,z=Math.cos(y)*d;f.x=k,f.y=x,f.z=z}if(2==this.param.shape){y=.5*Math.PI+(Math.random()-.5)*Math.PI*.025,M=Math.random()*Math.PI/6+Math.PI/3*(i%6),k=Math.sin(y)*Math.cos(M)*d,x=Math.sin(y)*Math.sin(M)*d,z=Math.cos(y)*d;f.x=k,f.y=x,f.z=z}for(var D=e.partLength,P=0;P<D;P++)o[3*(i*D+P)+0]=f.x,o[3*(i*D+P)+1]=f.y,o[3*(i*D+P)+2]=f.z,n[3*(i*D+P)+0]=h.r,n[3*(i*D+P)+1]=h.g,n[3*(i*D+P)+2]=h.b,l[i*D+P]=Math.random()*e.flickerDensity,m[i*D+P]=Math.round(P/2)}r.setAttribute("position",new c.m(o,3)),r.setAttribute("colors",new c.m(n,3)),r.setAttribute("flickerDensity",new c.m(l,1).setUsage(c.k)),r.setAttribute("drawNumber",new c.m(m,1).setUsage(c.k)),r.rotateX(Math.random()*Math.PI*2),r.rotateY(Math.random()*Math.PI*2),r.rotateZ(Math.random()*Math.PI*2),r.computeVertexNormals(),r.computeBoundingBox(),r.computeBoundingSphere();var S=[];for(i=0;i<e.partLength;i++)S[i]=0;var O=new c.I({defines:{partLength:parseFloat(e.partLength)},uniforms:{time:{value:0},times:{value:S},color01:{value:e.partColors[0]},color02:{value:e.partColors[1]},color03:{value:e.partColors[2]},lifeTime:{value:e.lifeTime},masterFlickerDensity:{value:e.flickerDensity},releaseDuration:{value:e.releaseDuration},totalSize:{value:e.totalSize}},vertexShader:["uniform float time;","uniform float times["+e.partLength+"];","uniform float lifeTime;","uniform float masterFlickerDensity;","uniform float totalSize;","attribute vec3 colors;","attribute float flickerDensity;","attribute float drawNumber;","varying float vFlickerDensity;","varying float vDrawNumber;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","float easeOutCubic(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t + 1.0) + b;","}","float easeOutQuint(float t,float b,float c,float d)","{","\treturn c*((t=t/d-1.0)*t*t*t*t + 1.0) + b;","}","float easeOutExpo(float t,float b,float c,float d)","{","\treturn (t==d) ? b+c : c * 1.001 * (-pow(2.0, -10.0 * t/d) + 1.0) + b;","}","void main() {","\tvec3 pos = normalize( position );","\tint index = int(drawNumber);","\tfloat _timeValue = times[index];","\tfloat _time = _timeValue > lifeTime + masterFlickerDensity? lifeTime + masterFlickerDensity : _timeValue;","\tfloat fireScale = easeOutCubic( _time, 0.0, 1.0, lifeTime + masterFlickerDensity ) * totalSize;","\tvec3 _newPos = pos * fireScale * 50.0;","\t_newPos.y -= _timeValue * _timeValue * 2.5;","\tpos = _newPos;","\tvFlickerDensity = flickerDensity;","\tvDrawNumber = drawNumber;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform float lifeTime;","uniform float releaseDuration;","uniform vec3 color01;","uniform vec3 color02;","uniform vec3 color03;","varying float vFlickerDensity;","varying float vDrawNumber;","float easeOutQuad(float t,float b,float c,float d)","{","\treturn -c *(t/=d)*(t-2.0) + b;","}","void main( void ) {","\tfloat _offset = 1.0 - ( time - ( lifeTime + vFlickerDensity ) ) / releaseDuration;","\tfloat _opacity = time / ( lifeTime + vFlickerDensity ) < 1.0? 1.0: _offset;","\t_opacity = _opacity * ( 1.0 - vDrawNumber / float(partLength) );","\t_opacity = _opacity * _opacity * _opacity;","\tfloat _check = time / ( lifeTime + vFlickerDensity );","\tvec3 myColor = color01;","\tmyColor = mix(color01, color02, smoothstep(0.0, 0.5, _check));","\tmyColor = mix(color02, color03, smoothstep(0.5, 1.0, _check));","\tgl_FragColor = vec4( myColor, max( _opacity, 0.0 ) );","}"].join("\n"),blending:c.b,depthTest:!1,transparent:!0,vertexColors:!0});this.mesh=new c.s(r,O)}},{key:"update",value:function(e){this.mesh.material.uniforms.time.value+=e;for(var t=this.mesh.material.uniforms.times.value,r=t.length;r;)0==--r?t[0]+=e:t[r]=t[r-1]}},{key:"dispose",value:function(){this.param=null}}]),e}(),d=function(){function e(t){Object(n.a)(this,e),o=this,this.param=t,this.init()}return Object(l.a)(e,[{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"dispose",value:function(){this.param=null}}]),e}()},249:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var o,n=r(110),l=r(111),c=(r(60),r(165),r(223)),m=r(231),f=(r(236),r(237)),h=function(){function e(t){Object(n.a)(this,e),this.props=t,o=this,this.world,this.loopKey,this.init(),this.loop(),this.addEvents()}return Object(l.a)(e,[{key:"init",value:function(){this.world=new m.default(this.props.$canvas,this.props.$bgColor),this.world.renderStart(),this.world.controls.autoRotate=!0,this.world.controls.autoRotateSpeed=.1,this.world.scene.fog=new c.n(this.props.$bgColor,600,1e3);c.z,c.u,c.G,c.f,c.a,c.i;this.world.renderer.toneMappingExposure=1,this.grid=new c.p(2e3,200),this.grid.material.transparent=!0,this.grid.material.opacity=.1,this.world.add(this.grid),this.world.camera.fov=60,this.world.focalLengthToFOV(28),console.log("FOV: ",~~this.world.camera.fov),this.world.camera.position.y=1.6,this.world.camera.position.z=3,this.world.focus=new c.O(0,1.6,0),this.world.camera.position.y=100,this.world.camera.position.z=300;var e=new c.c(100,100,100,1,1,1),t=new c.y({wireframe:!0,transparent:!0,opacity:.05,depthTest:!1}),r=new c.x(e,t);this.world.add(r),this.objectList=[],this.textures=[],this.textures[0]=(new c.L).load("assets/img/spark1.png"),this.textures[1]=(new c.L).load("assets/img/circle1.png"),this.textures[2]=(new c.L).load("assets/img/particle01.png"),this.textures[3]=(new c.L).load("assets/img/particle02.png"),this.textures[4]=(new c.L).load("assets/img/particle03.png"),window.addEventListener("keydown",(function(e){var t=o.generateParams();o.fire(t),e.preventDefault()})),this.props.$canvas.addEventListener("touchmove",(function(e){if(Math.random()<.5){var t=o.generateParams();o.fire(t)}e.preventDefault()})),this.props.$canvas.addEventListener("touchstart",(function(e){var t=o.generateParams();o.fire(t),e.preventDefault()})),setInterval((function(){var e=o.generateParams();o.fire(e)}),100)}},{key:"loop",value:function(){o.loopKey=window.requestAnimationFrame(o.loop);for(var e=o.objectList.length;e;)for(var t in e--,o.objectList[e].instances){o.objectList[e].instances[t].update(o.world.delta);var r=o.objectList[e].instances[t].mesh,n=o.objectList[e].instances[t].param.deadTime;if(r.material.uniforms.time.value>n){var l=o.objectList.splice(e,1);for(var c in l[0].instances){var m=l[0].instances[c];o.world.remove(m.mesh),m.dispose()}l=null;break}}}},{key:"fire",value:function(e){for(var t=[],r=-1e3,i=0;i<e.length;i++){var n;n="BOTAN"==e[i].type?new f.Botan(e[i]):new f.Kiku(e[i]),o.world.add(n.mesh),n.mesh.position.set(e[i].position.x,e[i].position.y,e[i].position.z),t[i]=n,r=e[i].deadTime>r?e[i].deadTime:r}for(var l=["LayerE","LayerD","LayerC","LayerB","LayerA"],c={},m=e.length;m;)c[l[--m]]=t[m];var h={name:"name",date:(new Date).getTime(),instances:c,deadTime:r,fworks:{}};o.objectList.push(h)}},{key:"generateParams",value:function(){var e=new c.O,t=200*(1-Math.random()*Math.random()),r=Math.random()*Math.PI*2;e.x=Math.cos(r)*t,e.y=100*Math.random(),e.z=Math.sin(r)*t;for(var n=Math.floor(3*Math.random())+3,l=[],i=0;i<n;i++){var m=360*Math.random(),f=Math.random()*m,h=[{h:0,s:.85,l:.75},{h:120,s:.85,l:.75},{h:240,s:.85,l:.75},{h:60,s:.85,l:.75},{h:300,s:.85,l:.75},{h:0,s:0,l:.9},{h:60,s:.2,l:1}],d=(Math.random(),Math.random(),Math.random(),{type:Math.random()<.75?"BOTAN":"KIKU",shape:Math.floor(5*Math.random()),lifeTime:1.2,partCount:100*n-100*i,partSize:10+~~(10*Math.random()),partSizeVariance:1,flickerDensity:.5,partLength:24,partColors:[(new c.h).setHSL(Math.random(),.85,.75),(new c.h).setHSL(Math.random(),.85,.75),(new c.h).setHSL(Math.random(),.85,.75)],releaseDuration:.3,fworkSpeed:1,fworkAccel:10,fworkGravity:1,fworkHueMin:f,fworkHueMax:m,totalSize:(1+.1*Math.floor(10*Math.random()))*((i+1)/n+.1*(Math.random()-.5)),deadTime:1,position:e,textures:o.textures});d.deadTime=d.lifeTime+d.flickerDensity+d.releaseDuration,l[i]=d}return l}},{key:"resize",value:function(e){}},{key:"addEvents",value:function(){window.addEventListener("resize",o.resize)}},{key:"removeEvents",value:function(){window.removeEventListener("resize",o.resize),window.removeEventListener("orientationchange",o.resize)}}]),e}()}}]);