<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Language" content="ja">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="imagetoolbar" content="no">
<meta http-equiv="cleartype" content="on">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=yes, viewport-fit=cover">
<meta name="keywords" content="">
<meta name="description" content="">
<link href="http://fonts.googleapis.com/css?family=EB+Garamond" rel="stylesheet" type="text/css">
<link href="shared/css/reset.css" rel="stylesheet" type="text/css" media="all">
<link href="shared/css/style.css" rel="stylesheet" type="text/css" media="all">
<title>Metrogram 2020 - study</title>
</head>
<body>
<div id="container">
<div id="siteHead">
<h1>Metrogram 2020 - study</h1>
<h2>with ShaderToy.</h2>
<!--/ siteHead --></div>
<div id="siteBody">
<div id="webglView"><!--/ webglView --></div>
<!--/ siteBody --></div>
<div id="siteFoot"><p>&copy; nulldesign.jp</p>
<!--/ siteFoot --></div>
<!--/ container --></div>
<script type="x-shader/x-vertex" id="vertexshader">
void main()
{
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
</script>
<script type="x-shader/x-fragment" id="fragmentshader">
uniform float time;
uniform vec2 mouse;
uniform vec2 resolution;

uniform sampler2D backbuffer;
uniform sampler2D image01;

void main()
{
  vec2 uv = gl_FragCoord.xy / resolution.xy;
  float d = distance( mouse.xy * resolution.xy, gl_FragCoord.xy );
  d = 10.0 / d;
  d = pow( d, 2.0 );

  vec4 img = texture2D( image01, uv );
  // img.rgb = 1.0 - img.rgb;

  vec4 b = texture2D( backbuffer, uv );
  b *= 0.34;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2(-1.0,  1.0) ) / resolution.xy ) * 0.04;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 0.0,  1.0) ) / resolution.xy ) * 0.04;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 1.0,  1.0) ) / resolution.xy ) * 0.04;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2(-1.0,  0.0) ) / resolution.xy ) * 0.04;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 1.0,  0.0) ) / resolution.xy ) * 0.04;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2(-1.0, -1.0) ) / resolution.xy ) * 0.04;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 0.0, -1.0) ) / resolution.xy ) * 0.04;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 1.0, -1.0) ) / resolution.xy ) * 0.04;

  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2(-2.0,  2.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2(-1.0,  2.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 0.0,  2.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 1.0,  2.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 2.0,  2.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2(-2.0,  1.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 2.0,  1.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2(-2.0,  0.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 2.0,  0.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2(-2.0, -1.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 2.0, -1.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2(-2.0, -2.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2(-1.0, -2.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 0.0, -2.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 1.0, -2.0) ) / resolution.xy ) * 0.02;
  b += texture2D(backbuffer, (gl_FragCoord.xy + vec2( 2.0, -2.0) ) / resolution.xy ) * 0.02;


  //gl_FragColor = d * vec4(uv,0.5+0.5*sin(time),1.0) + b;

  //d = distance( resolution.xy * 0.5, gl_FragCoord.xy );
  //d = 10.0 / d;
  //d = pow( d, 2.0 );

  //gl_FragColor = b + img * 0.05 * vec4(uv -0.25,0.5+0.5*sin(time * 0.7),1.0);
  gl_FragColor = b + img * 0.05;


  gl_FragColor.rgb = floor( gl_FragColor.rgb * 64.0 ) / 64.0;

}
</script>
<script type="text/javascript" src="shared/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="shared/js/three.min.js"></script>
<script type="text/javascript" src="shared/js/OrbitControls.js"></script>
<script type="text/javascript" src="shared/js/world.js"></script>
<script type="text/javascript" src="shared/js/html2canvas.min.js"></script>
<script type="text/javascript" src="shared/js/SplineCurve.js"></script>
<script type="text/javascript" src="shared/js/engine.js"></script>
</script>
</body>
</html>
